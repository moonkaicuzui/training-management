import{j as e}from"./vendor-ui-3vVLwvSG.js";import{u as J,r as x}from"./vendor-react-3RSvEdhP.js";import{g as K,B as b,C as h,a as p,b as u,e as j,I as O,n as W,o as X,i as Y,d as R,f as t}from"./index-DbE0N-7e.js";import{T as F,a as M,b as g,c as a,d as $,e as r}from"./table-C47-Z7GG.js";import{S as C,a as T,b as _,c as S,d as c}from"./select-B9RdTlAY.js";import{T as Z,a as ee,b as V,c as k}from"./tabs-BiL_WdmF.js";import{P as se}from"./LoadingSpinner-C546iy_4.js";import{u as le}from"./vendor-i18n-BmxLmPQ7.js";import{D as ae,T as H,w as I,S as re}from"./vendor-icons-B-g4Br4W.js";import{f as L}from"./vendor-utils-CC1vNFCq.js";import"./vendor-charts-B2i3rig-.js";function ue(){const{t:l}=le(),D=J(),{retrainingTargets:B,expiringTrainings:E,loading:P,fetchRetrainingTargets:z,fetchExpiringTrainings:A}=K(),[n,Q]=x.useState(""),[d,U]=x.useState("all"),[o,q]=x.useState("all"),[m,G]=x.useState("all");x.useEffect(()=>{z(),A(30)},[]);const y=B.filter(s=>{const i=n===""||s.employee.employee_name.toLowerCase().includes(n.toLowerCase())||s.employee.employee_id.toLowerCase().includes(n.toLowerCase())||s.program.program_code.toLowerCase().includes(n.toLowerCase()),v=d==="all"||s.employee.building===d,N=o==="all"||s.employee.department===o,w=m==="all"||s.program.category===m;return i&&v&&N&&w}),f=E.filter(s=>{const i=n===""||s.employee.employee_name.toLowerCase().includes(n.toLowerCase())||s.employee.employee_id.toLowerCase().includes(n.toLowerCase())||s.program.program_code.toLowerCase().includes(n.toLowerCase()),v=d==="all"||s.employee.building===d,N=o==="all"||s.employee.department===o,w=m==="all"||s.program.category===m;return i&&v&&N&&w});return P.retraining?e.jsx(se,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:l("retraining.title")}),e.jsx("p",{className:"text-muted-foreground",children:"재교육이 필요한 직원과 만료 예정인 교육을 관리하세요"})]}),e.jsxs(b,{variant:"outline",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),l("common.export")]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"재교육 필요"}),e.jsx(H,{className:"h-4 w-4 text-destructive"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold text-destructive",children:[B.length,"명"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"불합격으로 인한 재교육 대상자"})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"만료 예정"}),e.jsx(I,{className:"h-4 w-4 text-status-warning"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold text-status-warning",children:[E.length,"건"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"30일 이내 만료 예정 교육"})]})]})]}),e.jsx(h,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(re,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"사번, 이름, 프로그램 검색...",className:"pl-8",value:n,onChange:s=>Q(s.target.value)})]}),e.jsxs(C,{value:d,onValueChange:U,children:[e.jsx(T,{className:"w-[180px]",children:e.jsx(_,{placeholder:l("employee.building")})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:l("common.all")}),W.map(s=>e.jsx(c,{value:s.value,children:l(`building.${s.value}`)},s.value))]})]}),e.jsxs(C,{value:o,onValueChange:q,children:[e.jsx(T,{className:"w-[180px]",children:e.jsx(_,{placeholder:l("employee.department")})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:l("common.all")}),X.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(C,{value:m,onValueChange:G,children:[e.jsx(T,{className:"w-[180px]",children:e.jsx(_,{placeholder:l("program.category")})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:l("common.all")}),Y.map(s=>e.jsx(c,{value:s.value,children:l(`category.${s.value}`)},s.value))]})]})]})})}),e.jsxs(Z,{defaultValue:"failed",children:[e.jsxs(ee,{children:[e.jsxs(V,{value:"failed",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"불합격 재교육 (",y.length,")"]}),e.jsxs(V,{value:"expiring",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"만료 예정 (",f.length,")"]})]}),e.jsx(k,{value:"failed",className:"mt-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:l("retraining.failed")}),e.jsx(R,{children:"불합격으로 인해 재교육이 필요한 직원 목록"})]}),e.jsx(j,{children:y.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"재교육이 필요한 직원이 없습니다"}):e.jsxs(F,{children:[e.jsx(M,{children:e.jsxs(g,{children:[e.jsx(a,{children:"사번"}),e.jsx(a,{children:l("employee.name")}),e.jsx(a,{children:l("employee.building")}),e.jsx(a,{children:l("employee.department")}),e.jsx(a,{children:"프로그램"}),e.jsx(a,{children:"불합격일"}),e.jsx(a,{className:"text-center",children:"점수"}),e.jsx(a,{className:"w-[100px]",children:l("common.actions")})]})}),e.jsx($,{children:y.map((s,i)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono",children:s.employee.employee_id}),e.jsx(r,{className:"font-medium",children:s.employee.employee_name}),e.jsx(r,{children:l(`building.${s.employee.building}`)}),e.jsx(r,{children:e.jsx(t,{variant:"outline",children:s.employee.department})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx(t,{variant:"outline",className:"mb-1",children:s.program.program_code}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.program.program_name})]})}),e.jsx(r,{children:L(new Date(s.lastResult.training_date),"yyyy-MM-dd")}),e.jsx(r,{className:"text-center",children:e.jsx(t,{variant:"destructive",children:s.lastResult.score??"N/A"})}),e.jsx(r,{children:e.jsx(b,{variant:"outline",size:"sm",onClick:()=>D(`/employees/${s.employee.employee_id}`),children:"상세"})})]},i))})]})})]})}),e.jsx(k,{value:"expiring",className:"mt-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:l("progress.expiring")}),e.jsx(R,{children:"30일 이내에 교육 유효기간이 만료되는 직원 목록"})]}),e.jsx(j,{children:f.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"만료 예정인 교육이 없습니다"}):e.jsxs(F,{children:[e.jsx(M,{children:e.jsxs(g,{children:[e.jsx(a,{children:"사번"}),e.jsx(a,{children:l("employee.name")}),e.jsx(a,{children:l("employee.building")}),e.jsx(a,{children:l("employee.department")}),e.jsx(a,{children:"프로그램"}),e.jsx(a,{children:"교육일"}),e.jsx(a,{children:"만료일"}),e.jsx(a,{children:"남은 일수"}),e.jsx(a,{className:"w-[100px]",children:l("common.actions")})]})}),e.jsx($,{children:f.map((s,i)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono",children:s.employee.employee_id}),e.jsx(r,{className:"font-medium",children:s.employee.employee_name}),e.jsx(r,{children:l(`building.${s.employee.building}`)}),e.jsx(r,{children:e.jsx(t,{variant:"outline",children:s.employee.department})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx(t,{variant:"outline",className:"mb-1",children:s.program.program_code}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.program.program_name})]})}),e.jsx(r,{children:L(new Date(s.lastPassDate),"yyyy-MM-dd")}),e.jsx(r,{children:L(new Date(s.expirationDate),"yyyy-MM-dd")}),e.jsx(r,{children:e.jsxs(t,{variant:s.daysUntilExpiry<=7?"destructive":"warning",children:[s.daysUntilExpiry,"일"]})}),e.jsx(r,{children:e.jsx(b,{variant:"outline",size:"sm",onClick:()=>D(`/employees/${s.employee.employee_id}`),children:"상세"})})]},i))})]})})]})})]})]})}export{ue as default};
