import{j as e}from"./vendor-ui-3vVLwvSG.js";import{r as l}from"./vendor-react-3RSvEdhP.js";import{g as O,h as M,B as d,C as v,e as N,I as R,i as B,a as F,b as H,d as $,f as c,D as L,j as Q,k as U,l as u,m as V}from"./index-DbE0N-7e.js";import{T as z,a as A,b as j,c as t,d as G,e as r}from"./table-C47-Z7GG.js";import{S as W,a as q,b as J,c as K,d as w}from"./select-B9RdTlAY.js";import{D as X,a as Y,b as Z,c as ee,d as se,e as ae}from"./dialog-D5PoXStQ.js";import{C as re}from"./checkbox-Dpm-Lu5v.js";import{L as te}from"./label-Dcyga6z7.js";import{P as le}from"./LoadingSpinner-C546iy_4.js";import{u as ne}from"./vendor-i18n-BmxLmPQ7.js";import{P as ce,S as ie,x as oe,E as de,y as me,z as xe}from"./vendor-icons-B-g4Br4W.js";import"./vendor-utils-CC1vNFCq.js";import"./vendor-charts-B2i3rig-.js";function Te(){const{t:s}=ne(),{programs:m,loading:y,fetchPrograms:C,deleteProgram:D}=O(),{addToast:g,language:S}=M(),[x,T]=l.useState(""),[i,_]=l.useState("all"),[h,P]=l.useState(!1),[b,o]=l.useState(!1),[p,f]=l.useState(null);l.useEffect(()=>{C({search:x||void 0,category:i!=="all"?i:void 0,showInactive:h})},[x,i,h]);const I=async()=>{if(p)try{await D(p),g({type:"success",title:s("messages.deleteSuccess")})}catch{g({type:"error",title:s("messages.deleteError")})}finally{o(!1),f(null)}},k=a=>{switch(S){case"vi":return a.program_name_vn||a.program_name;case"ko":return a.program_name_kr||a.program_name;default:return a.program_name}},E=a=>{switch(a){case"QIP":return"default";case"PRODUCTION":return"secondary";case"RETRAINING":return"warning";case"NEWCOMER":return"success";case"PROMOTION":return"default";default:return"outline"}};return y.programs?e.jsx(le,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s("program.title")}),e.jsx("p",{className:"text-muted-foreground",children:s("program.description")})]}),e.jsxs(d,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),s("program.addProgram")]})]}),e.jsx(v,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:s("program.searchPlaceholder"),className:"pl-8",value:x,onChange:a=>T(a.target.value)})]}),e.jsxs(W,{value:i,onValueChange:_,children:[e.jsx(q,{className:"w-full md:w-[180px]",children:e.jsx(J,{placeholder:s("program.category")})}),e.jsxs(K,{children:[e.jsx(w,{value:"all",children:s("common.all")}),B.map(a=>e.jsx(w,{value:a.value,children:s(`category.${a.value}`)},a.value))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"showInactive",checked:h,onCheckedChange:a=>P(a===!0)}),e.jsx(te,{htmlFor:"showInactive",className:"text-sm",children:s("program.includeInactive")})]})]})})}),e.jsxs(v,{children:[e.jsxs(F,{children:[e.jsx(H,{children:s("program.list")}),e.jsx($,{children:s("program.count",{count:m.length})})]}),e.jsx(N,{children:e.jsxs(z,{children:[e.jsx(A,{children:e.jsxs(j,{children:[e.jsx(t,{className:"w-[80px]",children:s("program.code")}),e.jsx(t,{children:s("program.name")}),e.jsx(t,{children:s("program.category")}),e.jsx(t,{children:s("program.targetPositions")}),e.jsx(t,{className:"text-center",children:s("program.passingScore")}),e.jsx(t,{className:"text-center",children:s("program.duration")}),e.jsx(t,{className:"text-center",children:s("program.validity")}),e.jsx(t,{children:s("common.status")}),e.jsx(t,{className:"w-[80px]",children:s("common.actions")})]})}),e.jsx(G,{children:m.length===0?e.jsx(j,{children:e.jsx(r,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:s("common.noData")})}):m.map(a=>e.jsxs(j,{children:[e.jsx(r,{className:"font-mono font-medium",children:a.program_code}),e.jsxs(r,{children:[e.jsx("div",{className:"font-medium",children:k(a)}),a.tags.length>0&&e.jsx("div",{className:"flex gap-1 mt-1",children:a.tags.slice(0,3).map(n=>e.jsx(c,{variant:"outline",className:"text-xs",children:n},n))})]}),e.jsx(r,{children:e.jsx(c,{variant:E(a.category),children:s(`category.${a.category}`)})}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.target_positions.slice(0,2).map(n=>e.jsx(c,{variant:"outline",className:"text-xs",children:n},n)),a.target_positions.length>2&&e.jsxs(c,{variant:"outline",className:"text-xs",children:["+",a.target_positions.length-2]})]})}),e.jsxs(r,{className:"text-center font-medium",children:[a.passing_score,s("program.scoreUnit")]}),e.jsxs(r,{className:"text-center",children:[a.duration_hours,s("program.hours")]}),e.jsx(r,{className:"text-center",children:a.validity_months?`${a.validity_months}${s("program.months")}`:"-"}),e.jsx(r,{children:e.jsx(c,{variant:a.is_active?"success":"inactive",children:a.is_active?s("common.active"):s("common.inactive")})}),e.jsx(r,{children:e.jsxs(L,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(U,{align:"end",children:[e.jsxs(u,{children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),s("program.viewDetail")]}),e.jsxs(u,{children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),s("common.edit")]}),e.jsx(V,{}),e.jsxs(u,{className:"text-destructive",onClick:()=>{f(a.program_code),o(!0)},children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),s("common.delete")]})]})]})})]},a.program_code))})]})})]}),e.jsx(X,{open:b,onOpenChange:o,children:e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:s("messages.confirmDeleteTitle")}),e.jsx(se,{children:s("program.confirmDelete")})]}),e.jsxs(ae,{children:[e.jsx(d,{variant:"outline",onClick:()=>o(!1),children:s("common.cancel")}),e.jsx(d,{variant:"destructive",onClick:I,children:s("common.delete")})]})]})})]})}export{Te as default};
