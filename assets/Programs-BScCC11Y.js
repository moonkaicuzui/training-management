import{j as e}from"./vendor-ui-3vVLwvSG.js";import{r as l}from"./vendor-react-3RSvEdhP.js";import{g as O,h as M,B as d,C as v,e as N,I as R,i as B,a as F,b as H,d as $,f as c,D as L,j as Q,k as V,l as j,m as U}from"./index-CgMhWZQG.js";import{T as z,a as A,b as u,c as r,d as G,e as t}from"./table-C-QtM0IN.js";import{S as W,a as q,b as J,c as K,d as w}from"./select-BFo01T9H.js";import{D as X,a as Y,b as Z,c as ee,d as se,e as ae}from"./dialog-Xn2gZ5Td.js";import{C as te}from"./checkbox-C8WeefjX.js";import{L as re}from"./label-eAUooUtc.js";import{P as le}from"./LoadingSpinner-8oabGzS7.js";import{u as ne}from"./vendor-i18n-BvwHJnYO.js";import{P as ce,S as ie,t as oe,E as de,u as me,v as xe}from"./vendor-icons-O1RA8j5J.js";import"./vendor-utils-DC3_vehr.js";import"./vendor-charts-BNo0ya6L.js";function Te(){const{t:a}=ne(),{programs:m,loading:C,fetchPrograms:y,deleteProgram:D}=O(),{addToast:g,language:S}=M(),[x,T]=l.useState(""),[i,_]=l.useState("all"),[h,b]=l.useState(!1),[P,o]=l.useState(!1),[p,f]=l.useState(null);l.useEffect(()=>{y({search:x||void 0,category:i!=="all"?i:void 0,showInactive:h})},[x,i,h]);const I=async()=>{if(p)try{await D(p),g({type:"success",title:a("messages.deleteSuccess")})}catch{g({type:"error",title:a("messages.deleteError")})}finally{o(!1),f(null)}},k=s=>{switch(S){case"vi":return s.program_name_vn||s.program_name;case"ko":return s.program_name_kr||s.program_name;default:return s.program_name}},E=s=>{switch(s){case"QIP":return"default";case"PRODUCTION":return"secondary";case"RETRAINING":return"warning";case"NEWCOMER":return"success";case"PROMOTION":return"default";default:return"outline"}};return C.programs?e.jsx(le,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("program.title")}),e.jsx("p",{className:"text-muted-foreground",children:"교육 프로그램을 관리하세요"})]}),e.jsxs(d,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),a("program.addProgram")]})]}),e.jsx(v,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"프로그램 코드 또는 이름으로 검색...",className:"pl-8",value:x,onChange:s=>T(s.target.value)})]}),e.jsxs(W,{value:i,onValueChange:_,children:[e.jsx(q,{className:"w-full md:w-[180px]",children:e.jsx(J,{placeholder:"카테고리"})}),e.jsxs(K,{children:[e.jsx(w,{value:"all",children:a("common.all")}),B.map(s=>e.jsx(w,{value:s.value,children:a(`category.${s.value}`)},s.value))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{id:"showInactive",checked:h,onCheckedChange:s=>b(s===!0)}),e.jsx(re,{htmlFor:"showInactive",className:"text-sm",children:"비활성 포함"})]})]})})}),e.jsxs(v,{children:[e.jsxs(F,{children:[e.jsx(H,{children:"프로그램 목록"}),e.jsxs($,{children:[m.length,"개의 프로그램"]})]}),e.jsx(N,{children:e.jsxs(z,{children:[e.jsx(A,{children:e.jsxs(u,{children:[e.jsx(r,{className:"w-[80px]",children:a("program.code")}),e.jsx(r,{children:a("program.name")}),e.jsx(r,{children:a("program.category")}),e.jsx(r,{children:a("program.targetPositions")}),e.jsx(r,{className:"text-center",children:a("program.passingScore")}),e.jsx(r,{className:"text-center",children:a("program.duration")}),e.jsx(r,{className:"text-center",children:a("program.validity")}),e.jsx(r,{children:a("common.status")}),e.jsx(r,{className:"w-[80px]",children:a("common.actions")})]})}),e.jsx(G,{children:m.length===0?e.jsx(u,{children:e.jsx(t,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:a("common.noData")})}):m.map(s=>e.jsxs(u,{children:[e.jsx(t,{className:"font-mono font-medium",children:s.program_code}),e.jsxs(t,{children:[e.jsx("div",{className:"font-medium",children:k(s)}),s.tags.length>0&&e.jsx("div",{className:"flex gap-1 mt-1",children:s.tags.slice(0,3).map(n=>e.jsx(c,{variant:"outline",className:"text-xs",children:n},n))})]}),e.jsx(t,{children:e.jsx(c,{variant:E(s.category),children:a(`category.${s.category}`)})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.target_positions.slice(0,2).map(n=>e.jsx(c,{variant:"outline",className:"text-xs",children:n},n)),s.target_positions.length>2&&e.jsxs(c,{variant:"outline",className:"text-xs",children:["+",s.target_positions.length-2]})]})}),e.jsxs(t,{className:"text-center font-medium",children:[s.passing_score,"점"]}),e.jsxs(t,{className:"text-center",children:[s.duration_hours,a("program.hours")]}),e.jsx(t,{className:"text-center",children:s.validity_months?`${s.validity_months}${a("program.months")}`:"-"}),e.jsx(t,{children:e.jsx(c,{variant:s.is_active?"success":"inactive",children:s.is_active?a("common.active"):a("common.inactive")})}),e.jsx(t,{children:e.jsxs(L,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(j,{children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"상세 보기"]}),e.jsxs(j,{children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),a("common.edit")]}),e.jsx(U,{}),e.jsxs(j,{className:"text-destructive",onClick:()=>{f(s.program_code),o(!0)},children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),a("common.delete")]})]})]})})]},s.program_code))})]})})]}),e.jsx(X,{open:P,onOpenChange:o,children:e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:a("messages.confirmDeleteTitle")}),e.jsx(se,{children:a("program.confirmDelete")})]}),e.jsxs(ae,{children:[e.jsx(d,{variant:"outline",onClick:()=>o(!1),children:a("common.cancel")}),e.jsx(d,{variant:"destructive",onClick:I,children:a("common.delete")})]})]})})]})}export{Te as default};
