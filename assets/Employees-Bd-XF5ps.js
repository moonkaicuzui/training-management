import{j as e}from"./vendor-ui-3vVLwvSG.js";import{k as V,r as u,u as F}from"./vendor-react-3RSvEdhP.js";import{B as S,C as T,e as w,I,o as R,p as $,n as B,a as D,b as L,d as U,f as P}from"./index-CgMhWZQG.js";import{T as _,a as M,b as N,c,d as H,e as t}from"./table-C-QtM0IN.js";import{S as v,a as C,b as A,c as E,d as o}from"./select-BFo01T9H.js";import{b as O,u as z}from"./normalizedStore-BVJQc_3I.js";import{P as q}from"./LoadingSpinner-8oabGzS7.js";import{u as Q}from"./vendor-i18n-BvwHJnYO.js";import{P as G,S as J,E as K}from"./vendor-icons-O1RA8j5J.js";import{f as W}from"./vendor-utils-DC3_vehr.js";import"./vendor-charts-BNo0ya6L.js";function X(a){const[g,n]=V(),{defaults:x,emptyValues:d=["","all",void 0]}=a,y=u.useMemo(()=>{const r={...x};return Object.keys(x).forEach(s=>{const i=x[s];if(Array.isArray(i)){const l=g.get(s);l&&(r[s]=l.split(",").filter(Boolean))}else{const l=g.get(s);l!==null&&(r[s]=l)}}),r},[g,x]),h=u.useCallback((r,s)=>{n(i=>{const l=new URLSearchParams(i);return s==null||d.includes(s)||Array.isArray(s)&&s.length===0?l.delete(r):Array.isArray(s)?l.set(r,s.join(",")):l.set(r,s),l},{replace:!0})},[n,d]),b=u.useCallback(r=>{n(s=>{const i=new URLSearchParams(s);return Object.entries(r).forEach(([l,m])=>{m==null||d.includes(m)||Array.isArray(m)&&m.length===0?i.delete(l):Array.isArray(m)?i.set(l,m.join(",")):i.set(l,m)}),i},{replace:!0})},[n,d]),j=u.useCallback(()=>{n({},{replace:!0})},[n]),p=u.useCallback(r=>{n(s=>{const i=new URLSearchParams(s);return i.delete(r),i},{replace:!0})},[n]),f=u.useMemo(()=>{const r=new URLSearchParams;Object.entries(y).forEach(([i,l])=>{l!=null&&!d.includes(l)&&!(Array.isArray(l)&&l.length===0)&&(Array.isArray(l)?r.set(i,l.join(",")):r.set(i,l))});const s=r.toString();return s?`?${s}`:""},[y,d]);return{filters:y,setFilter:h,setFilters:b,resetFilters:j,resetFilter:p,queryString:f}}function ce(){const{t:a}=Q(),g=F(),{employees:n,loading:x}=O(),d=z(s=>s.fetchEmployees),{filters:y,setFilter:h}=X({defaults:{search:"",department:"all",position:"all",building:"all",status:"ACTIVE"}}),{search:b,department:j,position:p,building:f,status:r}=y;return u.useEffect(()=>{d({search:b||void 0,department:j!=="all"?j:void 0,position:p!=="all"?p:void 0,building:f!=="all"?f:void 0,status:r!=="all"?r:void 0})},[b,j,p,f,r]),x?e.jsx(q,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("employee.title")}),e.jsx("p",{className:"text-muted-foreground",children:"직원 정보 및 교육 이력을 관리하세요"})]}),e.jsxs(S,{children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),a("employee.addEmployee")]})]}),e.jsx(T,{children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative lg:col-span-1",children:[e.jsx(J,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:"사번 또는 이름...",className:"pl-8",value:b,onChange:s=>h("search",s.target.value)})]}),e.jsxs(v,{value:j,onValueChange:s=>h("department",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.department")})}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:a("common.all")}),R.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(v,{value:p,onValueChange:s=>h("position",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.position")})}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:a("common.all")}),$.map(s=>e.jsx(o,{value:s.value,children:a(`position.${s.value}`)},s.value))]})]}),e.jsxs(v,{value:f,onValueChange:s=>h("building",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.building")})}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:a("common.all")}),B.map(s=>e.jsx(o,{value:s.value,children:a(`building.${s.value}`)},s.value))]})]}),e.jsxs(v,{value:r,onValueChange:s=>h("status",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("common.status")})}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:a("common.all")}),e.jsx(o,{value:"ACTIVE",children:a("common.active")}),e.jsx(o,{value:"INACTIVE",children:a("common.inactive")})]})]})]})})}),e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsx(L,{children:"직원 목록"}),e.jsxs(U,{children:[n.length,"명의 직원"]})]}),e.jsx(w,{children:e.jsxs(_,{children:[e.jsx(M,{children:e.jsxs(N,{children:[e.jsx(c,{children:a("employee.id")}),e.jsx(c,{children:a("employee.name")}),e.jsx(c,{children:a("employee.department")}),e.jsx(c,{children:a("employee.position")}),e.jsx(c,{children:a("employee.building")}),e.jsx(c,{children:a("employee.line")}),e.jsx(c,{children:a("employee.hireDate")}),e.jsx(c,{children:a("common.status")}),e.jsx(c,{className:"w-[80px]",children:a("common.actions")})]})}),e.jsx(H,{children:n.length===0?e.jsx(N,{children:e.jsx(t,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:a("common.noData")})}):n.map(s=>e.jsxs(N,{children:[e.jsx(t,{className:"font-mono font-medium",children:s.employee_id}),e.jsx(t,{className:"font-medium",children:s.employee_name}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:s.department})}),e.jsx(t,{children:a(`position.${s.position}`)}),e.jsx(t,{children:a(`building.${s.building}`)}),e.jsx(t,{children:s.line}),e.jsx(t,{children:W(new Date(s.hire_date),"yyyy-MM-dd")}),e.jsx(t,{children:e.jsx(P,{variant:s.status==="ACTIVE"?"success":"inactive",children:s.status==="ACTIVE"?a("common.active"):a("common.inactive")})}),e.jsx(t,{children:e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>g(`/employees/${s.employee_id}`),children:e.jsx(K,{className:"h-4 w-4"})})})]},s.employee_id))})]})})]})]})}export{ce as default};
