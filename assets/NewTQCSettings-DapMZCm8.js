import{j as e}from"./vendor-ui-3vVLwvSG.js";import{r as h}from"./vendor-react-3RSvEdhP.js";import{f as L,B as d,I as v,C as _,a as w,b as T,d as C,e as b}from"./index-DbE0N-7e.js";import{T as A,a as B,b as p,c as n,d as O,e as i}from"./table-C47-Z7GG.js";import{S as $}from"./switch-DEYTfbKs.js";import{T as q,a as V,b as S,c as D}from"./tabs-BiL_WdmF.js";import{P as W}from"./LoadingSpinner-C546iy_4.js";import{D as Q,a as I,b as z,c as P,d as R,e as H}from"./dialog-D5PoXStQ.js";import{L as y}from"./label-Dcyga6z7.js";import"./textarea-DKXFBtN7.js";import"./select-B9RdTlAY.js";import"./LazyCharts-DetV40kx.js";import{e as Y,c as J,d as K,N as X,D as Z}from"./newTqcStore-CYv8xO33.js";import{n as E,a6 as U,z as M,P as G,Q as F,U as k}from"./vendor-icons-B-g4Br4W.js";import{f as ee}from"./vendor-utils-CC1vNFCq.js";import"./vendor-i18n-BmxLmPQ7.js";import"./vendor-charts-B2i3rig-.js";function se({open:m,onClose:j,teams:t,onCreateTeam:g,onUpdateTeam:x,onDeleteTeam:o}){const[r,l]=h.useState(null),[u,s]=h.useState(!1),[c,N]=h.useState(!1);return e.jsxs(Q,{open:m,onOpenChange:j,children:[e.jsxs(I,{className:"sm:max-w-[700px] max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(z,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"팀 설정 관리"]}),e.jsx(R,{children:"배치예정팀 목록을 관리합니다. 팀 추가, 수정, 삭제가 가능합니다."})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(p,{children:[e.jsx(n,{children:"팀 이름"}),e.jsx(n,{children:"베트남어"}),e.jsx(n,{children:"공장"}),e.jsx(n,{children:"라인"}),e.jsx(n,{className:"text-center",children:"상태"}),e.jsx(n,{className:"text-right",children:"작업"})]})}),e.jsx(O,{children:t.length===0?e.jsx(p,{children:e.jsx(i,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"등록된 팀이 없습니다."})}):t.map(a=>e.jsxs(p,{children:[e.jsx(i,{className:"font-medium",children:a.team_name}),e.jsx(i,{className:"text-muted-foreground",children:a.team_name_vn||"-"}),e.jsx(i,{children:a.factory||"-"}),e.jsx(i,{children:a.line||"-"}),e.jsx(i,{className:"text-center",children:e.jsx(L,{variant:a.is_active?"success":"secondary",children:a.is_active?"활성":"비활성"})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{l(a),s(!0)},children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>{confirm(`'${a.team_name}' 팀을 삭제하시겠습니까?`)&&o(a.team_id)},children:e.jsx(M,{className:"h-4 w-4"})})]})})]},a.team_id))})]})})}),e.jsxs(H,{className:"mt-4",children:[e.jsx(d,{variant:"outline",onClick:j,children:"닫기"}),e.jsxs(d,{onClick:()=>{l(null),s(!0)},children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"팀 추가"]})]})]}),e.jsx(ae,{open:u,onClose:()=>{s(!1),l(null)},team:r,onSubmit:async a=>{N(!0);try{r?await x({team_id:r.team_id,...a}):await g(a),s(!1),l(null)}finally{N(!1)}},isSaving:c})]})}function ae({open:m,onClose:j,team:t,onSubmit:g,isSaving:x}){const o=!!t,[r,l]=h.useState({team_name:"",team_name_vn:void 0,factory:void 0,line:void 0}),[u,s]=h.useState({});h.useEffect(()=>{l(t?{team_name:t.team_name,team_name_vn:t.team_name_vn,factory:t.factory,line:t.line}:{team_name:"",team_name_vn:void 0,factory:void 0,line:void 0}),s({})},[t,m]);const c=()=>{const a={};return r.team_name.trim()||(a.team_name="팀 이름을 입력하세요."),s(a),Object.keys(a).length===0},N=async()=>{c()&&await g(r)};return e.jsx(Q,{open:m,onOpenChange:j,children:e.jsxs(I,{className:"sm:max-w-[400px]",children:[e.jsxs(z,{children:[e.jsx(P,{children:o?"팀 수정":"새 팀 추가"}),e.jsx(R,{children:o?"팀 정보를 수정합니다.":"새로운 배치예정팀을 추가합니다."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"team_name",children:["팀 이름 ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(v,{id:"team_name",value:r.team_name,onChange:a=>l(f=>({...f,team_name:a.target.value})),placeholder:"예: ASSEMBLY",className:u.team_name?"border-destructive":""}),u.team_name&&e.jsx("p",{className:"text-xs text-destructive",children:u.team_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"team_name_vn",children:"베트남어 이름 (선택)"}),e.jsx(v,{id:"team_name_vn",value:r.team_name_vn||"",onChange:a=>l(f=>({...f,team_name_vn:a.target.value||void 0})),placeholder:"예: Lắp ráp"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"factory",children:"공장 (선택)"}),e.jsx(v,{id:"factory",value:r.factory||"",onChange:a=>l(f=>({...f,factory:a.target.value||void 0})),placeholder:"예: Building A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"line",children:"라인 (선택)"}),e.jsx(v,{id:"line",value:r.line||"",onChange:a=>l(f=>({...f,line:a.target.value||void 0})),placeholder:"예: Line 1"})]})]}),e.jsxs(H,{children:[e.jsx(d,{variant:"outline",onClick:j,disabled:x,children:"취소"}),e.jsx(d,{onClick:N,disabled:x,children:x?"저장 중...":o?"수정":"추가"})]})]})})}function ve(){const m=Y(),j=J(),{fetchTeams:t,createTeam:g,updateTeam:x,deleteTeam:o}=K(),[r,l]=h.useState(!1);h.useEffect(()=>{t(!0)},[]);const u=async(s,c)=>{await x({team_id:s,is_active:c}),await t(!0)};return j.teams&&m.length===0?e.jsx(W,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"설정"}),e.jsx("p",{className:"text-muted-foreground",children:"신입 TQC 교육 모듈 설정 관리"})]})}),e.jsxs(q,{defaultValue:"teams",className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(S,{value:"teams",className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"팀 관리"]}),e.jsxs(S,{value:"trainers",className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"트레이너"]}),e.jsxs(S,{value:"stages",className:"gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"교육 단계"]})]}),e.jsx(D,{value:"teams",children:e.jsxs(_,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"배치예정팀 관리"]}),e.jsx(C,{children:"교육생 배치 예정 팀을 관리합니다."})]}),e.jsxs(d,{onClick:()=>l(!0),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"팀 추가"]})]}),e.jsx(b,{className:"p-0",children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(p,{children:[e.jsx(n,{children:"팀 이름"}),e.jsx(n,{children:"베트남어"}),e.jsx(n,{children:"공장"}),e.jsx(n,{children:"라인"}),e.jsx(n,{className:"text-center",children:"상태"}),e.jsx(n,{children:"생성일"}),e.jsx(n,{className:"text-right",children:"작업"})]})}),e.jsx(O,{children:m.map(s=>e.jsxs(p,{children:[e.jsx(i,{className:"font-medium",children:s.team_name}),e.jsx(i,{className:"text-muted-foreground",children:s.team_name_vn||"-"}),e.jsx(i,{children:s.factory||"-"}),e.jsx(i,{children:s.line||"-"}),e.jsx(i,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx($,{checked:s.is_active,onCheckedChange:c=>u(s.team_id,c)}),e.jsx("span",{className:"text-sm",children:s.is_active?"활성":"비활성"})]})}),e.jsx(i,{className:"text-muted-foreground",children:ee(new Date(s.created_at),"yyyy-MM-dd")}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{},children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>{confirm(`'${s.team_name}' 팀을 삭제하시겠습니까?`)&&o(s.team_id)},children:e.jsx(M,{className:"h-4 w-4"})})]})})]},s.team_id))})]})})]})}),e.jsx(D,{value:"trainers",children:e.jsxs(_,{children:[e.jsxs(w,{children:[e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"트레이너 목록"]}),e.jsx(C,{children:"신입 교육 담당 트레이너 명단입니다."})]}),e.jsxs(b,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:X.map(s=>e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(k,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"트레이너"})]})]})},s))}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"※ 트레이너 관리는 별도 시스템에서 진행됩니다."})]})]})}),e.jsx(D,{value:"stages",children:e.jsxs(_,{children:[e.jsxs(w,{children:[e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"기본 교육 단계"]}),e.jsx(C,{children:"신입 교육생에게 적용되는 기본 교육 단계입니다."})]}),e.jsxs(b,{children:[e.jsx("div",{className:"space-y-3",children:Z.map((s,c)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-bold",children:c+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"기본 교육 단계"})]}),e.jsx(L,{variant:"outline",children:"1주"})]},c))}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"※ 교육 단계 수정은 관리자에게 문의하세요."})]})]})})]}),e.jsx(se,{open:r,onClose:()=>l(!1),teams:m,onCreateTeam:async s=>{await g(s),await t(!0)},onUpdateTeam:async s=>{await x(s),await t(!0)},onDeleteTeam:async s=>{await o(s),await t(!0)}})]})}export{ve as default};
