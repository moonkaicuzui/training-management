import{j as e,o as U,r as W,q,v as z,w as Z,t as J,a as K}from"./vendor-ui-3vVLwvSG.js";import{r as c}from"./vendor-react-3RSvEdhP.js";import{B as v,C,a as D,b as E,e as y,d as F,f as P}from"./index-CgMhWZQG.js";import{P as T}from"./progress-fp9ektkw.js";import{S as X,a as ee,b as se,c as te,d as S}from"./select-BFo01T9H.js";import{T as ne,a as ae,b as I,c as _,d as re,e as f}from"./table-C-QtM0IN.js";import{D as le,a as ie,b as oe,c as ce,d as de,e as me}from"./dialog-Xn2gZ5Td.js";import{P as xe,g as O,a3 as pe,j as ue,k as he,C as L,Y as je,a2 as ge,a4 as fe,D as Ne}from"./vendor-icons-O1RA8j5J.js";import"./vendor-i18n-BvwHJnYO.js";import"./vendor-charts-BNo0ya6L.js";import"./vendor-utils-DC3_vehr.js";function _e(t,a=[]){let n=[];function d(m,l){const x=c.createContext(l),s=n.length;n=[...n,l];const i=o=>{const{scope:j,children:h,...p}=o,N=j?.[t]?.[s]||x,b=c.useMemo(()=>p,Object.values(p));return e.jsx(N.Provider,{value:b,children:h})};i.displayName=m+"Provider";function u(o,j){const h=j?.[t]?.[s]||x,p=c.useContext(h);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${o}\` must be used within \`${m}\``)}return[i,u]}const r=()=>{const m=n.map(l=>c.createContext(l));return function(x){const s=x?.[t]||m;return c.useMemo(()=>({[`__scope${t}`]:{...x,[t]:s}}),[x,s])}};return r.scopeName=t,[d,be(r,...a)]}function be(...t){const a=t[0];if(t.length===1)return a;const n=()=>{const d=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(m){const l=d.reduce((x,{useScope:s,scopeName:i})=>{const o=s(m)[`__scope${i}`];return{...x,...o}},{});return c.useMemo(()=>({[`__scope${a.scopeName}`]:l}),[l])}};return n.scopeName=a.scopeName,n}function ve(t){const a=Ce(t),n=c.forwardRef((d,r)=>{const{children:m,...l}=d,x=c.Children.toArray(m),s=x.find(Pe);if(s){const i=s.props.children,u=x.map(o=>o===s?c.Children.count(i)>1?c.Children.only(null):c.isValidElement(i)?i.props.children:null:o);return e.jsx(a,{...l,ref:r,children:c.isValidElement(i)?c.cloneElement(i,void 0,u):null})}return e.jsx(a,{...l,ref:r,children:m})});return n.displayName=`${t}.Slot`,n}function Ce(t){const a=c.forwardRef((n,d)=>{const{children:r,...m}=n;if(c.isValidElement(r)){const l=Se(r),x=we(m,r.props);return r.type!==c.Fragment&&(x.ref=d?U(d,l):l),c.cloneElement(r,x)}return c.Children.count(r)>1?c.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var ye=Symbol("radix.slottable");function Pe(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ye}function we(t,a){const n={...a};for(const d in a){const r=t[d],m=a[d];/^on[A-Z]/.test(d)?r&&m?n[d]=(...x)=>{const s=m(...x);return r(...x),s}:r&&(n[d]=r):d==="style"?n[d]={...r,...m}:d==="className"&&(n[d]=[r,m].filter(Boolean).join(" "))}return{...t,...n}}function Se(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],M=Re.reduce((t,a)=>{const n=ve(`Primitive.${a}`),d=c.forwardRef((r,m)=>{const{asChild:l,...x}=r,s=l?n:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(s,{...x,ref:m})});return d.displayName=`Primitive.${a}`,{...t,[a]:d}},{}),R="Collapsible",[De]=_e(R),[Ee,A]=De(R),G=c.forwardRef((t,a)=>{const{__scopeCollapsible:n,open:d,defaultOpen:r,disabled:m,onOpenChange:l,...x}=t,[s,i]=W({prop:d,defaultProp:r??!1,onChange:l,caller:R});return e.jsx(Ee,{scope:n,disabled:m,contentId:q(),open:s,onOpenToggle:c.useCallback(()=>i(u=>!u),[i]),children:e.jsx(M.div,{"data-state":Y(s),"data-disabled":m?"":void 0,...x,ref:a})})});G.displayName=R;var V="CollapsibleTrigger",k=c.forwardRef((t,a)=>{const{__scopeCollapsible:n,...d}=t,r=A(V,n);return e.jsx(M.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":Y(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...d,ref:a,onClick:z(t.onClick,r.onOpenToggle)})});k.displayName=V;var H="CollapsibleContent",B=c.forwardRef((t,a)=>{const{forceMount:n,...d}=t,r=A(H,t.__scopeCollapsible);return e.jsx(Z,{present:n||r.open,children:({present:m})=>e.jsx(Ie,{...d,ref:a,present:m})})});B.displayName=H;var Ie=c.forwardRef((t,a)=>{const{__scopeCollapsible:n,present:d,children:r,...m}=t,l=A(H,n),[x,s]=c.useState(d),i=c.useRef(null),u=J(a,i),o=c.useRef(0),j=o.current,h=c.useRef(0),p=h.current,N=l.open||x,b=c.useRef(N),w=c.useRef(void 0);return c.useEffect(()=>{const g=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(g)},[]),K(()=>{const g=i.current;if(g){w.current=w.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const $=g.getBoundingClientRect();o.current=$.height,h.current=$.width,b.current||(g.style.transitionDuration=w.current.transitionDuration,g.style.animationName=w.current.animationName),s(d)}},[l.open,d]),e.jsx(M.div,{"data-state":Y(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!N,...m,ref:u,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...t.style},children:N&&r})});function Y(t){return t?"open":"closed"}var Te=G,Oe=k,Me=B;const Ae=Te,He=Oe,Ye=Me,$e=[{plan_id:"PLAN-2025-001",plan_name:"2025년 연간 교육 계획",year:2025,period:"YEARLY",status:"IN_PROGRESS",total_budget:5e8,created_by:"admin",created_at:"2024-12-01",planned_programs:[{program_code:"QIP-001",program_name:"QIP 기본 교육",planned_sessions:12,target_participants:240,scheduled_months:[1,2,3,4,5,6,7,8,9,10,11,12],priority:"HIGH",budget:5e7,actual_sessions:0,actual_participants:0,completion_rate:0},{program_code:"QIP-002",program_name:"SPC 교육",planned_sessions:6,target_participants:120,scheduled_months:[1,3,5,7,9,11],priority:"HIGH",budget:3e7,actual_sessions:0,actual_participants:0,completion_rate:0},{program_code:"QIP-003",program_name:"검사 기법",planned_sessions:4,target_participants:80,scheduled_months:[2,5,8,11],priority:"MEDIUM",budget:2e7,actual_sessions:0,actual_participants:0,completion_rate:0},{program_code:"PRO-001",program_name:"생산 관리",planned_sessions:6,target_participants:180,scheduled_months:[1,3,5,7,9,11],priority:"HIGH",budget:4e7,actual_sessions:0,actual_participants:0,completion_rate:0}]},{plan_id:"PLAN-2024-001",plan_name:"2024년 연간 교육 계획",year:2024,period:"YEARLY",status:"COMPLETED",total_budget:45e7,created_by:"admin",created_at:"2023-12-01",planned_programs:[{program_code:"QIP-001",program_name:"QIP 기본 교육",planned_sessions:12,target_participants:240,scheduled_months:[1,2,3,4,5,6,7,8,9,10,11,12],priority:"HIGH",budget:45e6,actual_sessions:12,actual_participants:235,completion_rate:100},{program_code:"QIP-002",program_name:"SPC 교육",planned_sessions:6,target_participants:120,scheduled_months:[1,3,5,7,9,11],priority:"HIGH",budget:28e6,actual_sessions:6,actual_participants:118,completion_rate:100}]}];function Q({plan:t}){const a=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];return e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:a.map((n,d)=>{const r=d+1,m=t.planned_programs.filter(i=>i.scheduled_months?.includes(r)),l=new Date().getMonth()+1,x=t.year<new Date().getFullYear()||t.year===new Date().getFullYear()&&r<l,s=t.year===new Date().getFullYear()&&r===l;return e.jsxs(C,{className:`p-2 ${s?"ring-2 ring-primary":""} ${x?"opacity-60":""}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-sm font-medium ${s?"text-primary":""}`,children:n}),e.jsx("p",{className:"text-2xl font-bold",children:m.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"교육 예정"})]}),m.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[m.slice(0,2).map(i=>e.jsx(P,{variant:"outline",className:"text-xs w-full justify-start truncate",children:i.program_name},i.program_code)),m.length>2&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",m.length-2,"개"]})]})]},n)})})}function Fe({open:t,onClose:a,plan:n}){const[d,r]=c.useState(new Set);if(!n)return null;const m=s=>{const i=new Set(d);i.has(s)?i.delete(s):i.add(s),r(i)},l=n.planned_programs.reduce((s,i)=>({sessions:s.sessions+i.planned_sessions,participants:s.participants+i.target_participants,actualSessions:s.actualSessions+i.actual_sessions,actualParticipants:s.actualParticipants+i.actual_participants}),{sessions:0,participants:0,actualSessions:0,actualParticipants:0}),x=l.sessions>0?Math.round(l.actualSessions/l.sessions*100):0;return e.jsx(le,{open:t,onOpenChange:a,children:e.jsxs(ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),n.plan_name]}),e.jsxs(de,{children:["기간: ",n.year,"년 | 상태: ",n.status==="DRAFT"?"초안":n.status==="APPROVED"?"승인됨":n.status==="IN_PROGRESS"?"진행중":"완료"]})]}),e.jsx(C,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"전체 진행률"}),e.jsxs("span",{className:"text-sm font-bold",children:[x,"%"]})]}),e.jsx(T,{value:x,className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[e.jsxs("p",{className:"text-lg font-bold",children:[l.actualSessions,"/",l.sessions]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"완료/계획 세션"})]}),e.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[e.jsxs("p",{className:"text-lg font-bold",children:[l.actualParticipants,"/",l.participants]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"완료/목표 인원"})]})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"월별 교육 일정"}),e.jsx(Q,{plan:n})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"프로그램별 계획"}),e.jsx("div",{className:"space-y-2",children:n.planned_programs.map(s=>{const i=d.has(s.program_code);return e.jsx(Ae,{open:i,onOpenChange:()=>m(s.program_code),children:e.jsxs(C,{children:[e.jsx(He,{className:"w-full",children:e.jsx(y,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsx(fe,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:s.program_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.program_code})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{variant:s.priority==="HIGH"?"destructive":s.priority==="MEDIUM"?"warning":"secondary",children:s.priority==="HIGH"?"높음":s.priority==="MEDIUM"?"보통":"낮음"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold",children:[s.completion_rate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"완료율"})]})]})]})})}),e.jsx(Ye,{children:e.jsxs(y,{className:"pt-0 pb-3 px-3",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-3 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"계획 세션"}),e.jsxs("p",{className:"font-bold",children:[s.planned_sessions,"회"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"완료 세션"}),e.jsxs("p",{className:"font-bold",children:[s.actual_sessions,"회"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"목표 인원"}),e.jsxs("p",{className:"font-bold",children:[s.target_participants,"명"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"실제 참여"}),e.jsxs("p",{className:"font-bold",children:[s.actual_participants,"명"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"예정 월"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.scheduled_months?.map(u=>e.jsxs(P,{variant:"outline",className:"text-xs",children:[u,"월"]},u))})]}),s.budget&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"예산"}),e.jsxs("p",{className:"font-medium",children:[s.budget.toLocaleString(),"원"]})]})]})})]})},s.program_code)})})]}),e.jsxs(me,{children:[e.jsx(v,{variant:"outline",onClick:a,children:"닫기"}),e.jsxs(v,{variant:"outline",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"내보내기"]})]})]})})}function Je(){const[t]=c.useState($e),[a,n]=c.useState(new Date().getFullYear().toString()),[d,r]=c.useState(null),[m,l]=c.useState(!1),x=c.useMemo(()=>t.filter(o=>a==="all"||o.year.toString()===a),[t,a]),s=t.find(o=>o.year===new Date().getFullYear()),i=c.useMemo(()=>{if(!s)return{programs:0,sessions:0,participants:0,progress:0};const o=s.planned_programs.reduce((h,p)=>h+p.planned_sessions,0),j=s.planned_programs.reduce((h,p)=>h+p.actual_sessions,0);return{programs:s.planned_programs.length,sessions:o,participants:s.planned_programs.reduce((h,p)=>h+p.target_participants,0),progress:o>0?Math.round(j/o*100):0}},[s]),u=o=>{r(o),l(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"연간 교육 계획"}),e.jsx("p",{className:"text-muted-foreground",children:"교육 계획 수립 및 진행 현황 관리"})]}),e.jsxs(v,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"새 계획 수립"]})]}),s&&e.jsxs(C,{className:"bg-gradient-to-r from-primary/10 to-primary/5",children:[e.jsx(D,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),new Date().getFullYear(),"년 교육 계획 현황"]})}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[e.jsx(pe,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:i.programs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"교육 프로그램"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[e.jsx(O,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:i.sessions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"계획 세션"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[e.jsx(ue,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:i.participants}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"목표 인원"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[e.jsx(he,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.progress,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"진행률"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"연간 진행률"}),e.jsxs("span",{className:"text-sm font-bold",children:[i.progress,"%"]})]}),e.jsx(T,{value:i.progress,className:"h-3"})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(v,{variant:"outline",onClick:()=>u(s),children:["상세 보기",e.jsx(L,{className:"h-4 w-4 ml-2"})]})})]})]}),s&&e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsx(E,{children:"월별 교육 일정"}),e.jsxs(F,{children:[new Date().getFullYear(),"년 월별 교육 예정 현황"]})]}),e.jsx(y,{children:e.jsx(Q,{plan:s})})]}),e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{children:"교육 계획 목록"}),e.jsx(F,{children:"연도별 교육 계획 관리"})]}),e.jsxs(X,{value:a,onValueChange:n,children:[e.jsx(ee,{className:"w-32",children:e.jsx(se,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"all",children:"전체"}),e.jsx(S,{value:"2025",children:"2025년"}),e.jsx(S,{value:"2024",children:"2024년"}),e.jsx(S,{value:"2023",children:"2023년"})]})]})]})}),e.jsx(y,{children:e.jsxs(ne,{children:[e.jsx(ae,{children:e.jsxs(I,{children:[e.jsx(_,{children:"계획명"}),e.jsx(_,{children:"연도"}),e.jsx(_,{children:"기간"}),e.jsx(_,{children:"프로그램"}),e.jsx(_,{children:"세션"}),e.jsx(_,{children:"예산"}),e.jsx(_,{children:"상태"}),e.jsx(_,{children:"진행률"}),e.jsx(_,{className:"text-right",children:"액션"})]})}),e.jsx(re,{children:x.length===0?e.jsx(I,{children:e.jsxs(f,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:[e.jsx(je,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"등록된 교육 계획이 없습니다"]})}):x.map(o=>{const j=o.planned_programs.reduce((N,b)=>N+b.planned_sessions,0),h=o.planned_programs.reduce((N,b)=>N+b.actual_sessions,0),p=j>0?Math.round(h/j*100):0;return e.jsxs(I,{children:[e.jsx(f,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.plan_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.plan_id})]})}),e.jsxs(f,{children:[o.year,"년"]}),e.jsx(f,{children:e.jsx(P,{variant:"outline",children:o.period==="YEARLY"?"연간":o.period==="QUARTERLY"?"분기":"월간"})}),e.jsxs(f,{children:[o.planned_programs.length,"개"]}),e.jsxs(f,{children:[j,"회"]}),e.jsx(f,{children:o.total_budget?`${(o.total_budget/1e8).toFixed(1)}억`:"-"}),e.jsx(f,{children:e.jsx(P,{variant:o.status==="COMPLETED"?"success":o.status==="IN_PROGRESS"?"default":o.status==="APPROVED"?"secondary":"outline",children:o.status==="DRAFT"?"초안":o.status==="APPROVED"?"승인됨":o.status==="IN_PROGRESS"?"진행중":"완료"})}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{value:p,className:"w-16 h-2"}),e.jsxs("span",{className:"text-sm",children:[p,"%"]})]})}),e.jsx(f,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>u(o),children:"상세"}),e.jsx(v,{variant:"ghost",size:"icon",children:e.jsx(ge,{className:"h-4 w-4"})})]})})]},o.plan_id)})})]})})]}),e.jsx(Fe,{open:m,onClose:()=>l(!1),plan:d})]})}export{Je as default};
