import{j as e,o as ce,t as q,r as oe,v as de,B as he,E as xe}from"./vendor-ui-3vVLwvSG.js";import{r as i}from"./vendor-react-3RSvEdhP.js";import{c as G,B as w,C as b,e as R,I as ue,a as me,b as pe,d as fe,f as M}from"./index-CgMhWZQG.js";import{L as k}from"./label-eAUooUtc.js";import{T as je,a as Ne,b as H,c as _,d as ge,e as E}from"./table-C-QtM0IN.js";import{S as W,a as F,b as $,c as V,d as v}from"./select-BFo01T9H.js";import{D as ve,a as ye,b as Se,c as Ce,d as we,e as Ee}from"./dialog-Xn2gZ5Td.js";import{C as Y}from"./checkbox-C8WeefjX.js";import{u as be}from"./vendor-i18n-BvwHJnYO.js";import{a6 as Re,a7 as U,B as D,a0 as _e,a8 as Ie,g as X,S as Te,v as z,A as ke,W as Ae,N as Me,T as De,s as Pe}from"./vendor-icons-O1RA8j5J.js";import{f as A,q as Q}from"./vendor-utils-DC3_vehr.js";import"./vendor-charts-BNo0ya6L.js";function Le(t,r=[]){let n=[];function l(h,c){const d=i.createContext(c),x=n.length;n=[...n,c];const u=p=>{const{scope:S,children:N,...f}=p,g=S?.[t]?.[x]||d,y=i.useMemo(()=>f,Object.values(f));return e.jsx(g.Provider,{value:y,children:N})};u.displayName=h+"Provider";function m(p,S){const N=S?.[t]?.[x]||d,f=i.useContext(N);if(f)return f;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${h}\``)}return[u,m]}const a=()=>{const h=n.map(c=>i.createContext(c));return function(d){const x=d?.[t]||h;return i.useMemo(()=>({[`__scope${t}`]:{...d,[t]:x}}),[d,x])}};return a.scopeName=t,[l,Be(a,...r)]}function Be(...t){const r=t[0];if(t.length===1)return r;const n=()=>{const l=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(h){const c=l.reduce((d,{useScope:x,scopeName:u})=>{const p=x(h)[`__scope${u}`];return{...d,...p}},{});return i.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return n.scopeName=r.scopeName,n}function Oe(t){const r=He(t),n=i.forwardRef((l,a)=>{const{children:h,...c}=l,d=i.Children.toArray(h),x=d.find(Ge);if(x){const u=x.props.children,m=d.map(p=>p===x?i.Children.count(u)>1?i.Children.only(null):i.isValidElement(u)?u.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(u)?i.cloneElement(u,void 0,m):null})}return e.jsx(r,{...c,ref:a,children:h})});return n.displayName=`${t}.Slot`,n}function He(t){const r=i.forwardRef((n,l)=>{const{children:a,...h}=n;if(i.isValidElement(a)){const c=Fe(a),d=We(h,a.props);return a.type!==i.Fragment&&(d.ref=l?ce(l,c):c),i.cloneElement(a,d)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ue=Symbol("radix.slottable");function Ge(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ue}function We(t,r){const n={...r};for(const l in r){const a=t[l],h=r[l];/^on[A-Z]/.test(l)?a&&h?n[l]=(...d)=>{const x=h(...d);return a(...d),x}:a&&(n[l]=a):l==="style"?n[l]={...a,...h}:l==="className"&&(n[l]=[a,h].filter(Boolean).join(" "))}return{...t,...n}}function Fe(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Z=$e.reduce((t,r)=>{const n=Oe(`Primitive.${r}`),l=i.forwardRef((a,h)=>{const{asChild:c,...d}=a,x=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...d,ref:h})});return l.displayName=`Primitive.${r}`,{...t,[r]:l}},{}),P="Switch",[Ve]=Le(P),[Ye,ze]=Ve(P),J=i.forwardRef((t,r)=>{const{__scopeSwitch:n,name:l,checked:a,defaultChecked:h,required:c,disabled:d,value:x="on",onCheckedChange:u,form:m,...p}=t,[S,N]=i.useState(null),f=q(r,T=>N(T)),g=i.useRef(!1),y=S?m||!!S.closest("form"):!0,[C,L]=oe({prop:a,defaultProp:h??!1,onChange:u,caller:P});return e.jsxs(Ye,{scope:n,checked:C,disabled:d,children:[e.jsx(Z.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":te(C),"data-disabled":d?"":void 0,disabled:d,value:x,...p,ref:f,onClick:de(t.onClick,T=>{L(B=>!B),y&&(g.current=T.isPropagationStopped(),g.current||T.stopPropagation())})}),y&&e.jsx(se,{control:S,bubbles:!g.current,name:l,value:x,checked:C,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});J.displayName=P;var K="SwitchThumb",ee=i.forwardRef((t,r)=>{const{__scopeSwitch:n,...l}=t,a=ze(K,n);return e.jsx(Z.span,{"data-state":te(a.checked),"data-disabled":a.disabled?"":void 0,...l,ref:r})});ee.displayName=K;var Qe="SwitchBubbleInput",se=i.forwardRef(({__scopeSwitch:t,control:r,checked:n,bubbles:l=!0,...a},h)=>{const c=i.useRef(null),d=q(c,h),x=he(n),u=xe(r);return i.useEffect(()=>{const m=c.current;if(!m)return;const p=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(p,"checked").set;if(x!==n&&N){const f=new Event("click",{bubbles:l});N.call(m,n),m.dispatchEvent(f)}},[x,n,l]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:d,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});se.displayName=Qe;function te(t){return t?"checked":"unchecked"}var re=J,qe=ee;const I=i.forwardRef(({className:t,...r},n)=>e.jsx(re,{className:G("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:n,children:e.jsx(qe,{className:G("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));I.displayName=re.displayName;const Xe=()=>{const t=[],r=["TRAINING_REMINDER","EXPIRY_WARNING","RETRAINING_REQUIRED","SESSION_CANCELLED","RESULT_AVAILABLE","CERTIFICATE_READY","SYSTEM"],n=["LOW","MEDIUM","HIGH","URGENT"],l={TRAINING_REMINDER:["QIP 기초 교육 예정","생산 품질 관리 교육 임박","안전 교육 D-3"],EXPIRY_WARNING:["QIP 자격 만료 임박 (7일)","생산 품질 자격 만료 (14일)","안전 교육 갱신 필요"],RETRAINING_REQUIRED:["재교육 필요: 불합격","역량 평가 미달","정기 재교육 대상자"],SESSION_CANCELLED:["3월 15일 교육 취소","일정 변경 안내","장소 변경 안내"],RESULT_AVAILABLE:["교육 결과 확인 가능","시험 결과 발표","평가 완료"],CERTIFICATE_READY:["이수증 발급 완료","자격증 갱신 완료","수료증 다운로드 가능"],SYSTEM:["시스템 점검 안내","새 기능 업데이트","보안 알림"]};for(let a=0;a<30;a++){const h=r[Math.floor(Math.random()*r.length)],c=n[Math.floor(Math.random()*n.length)],d=Math.floor(Math.random()*14),x=l[h],u=x[Math.floor(Math.random()*x.length)];t.push({notification_id:`NOTIF-${String(a+1).padStart(4,"0")}`,type:h,priority:c,title:u,message:`${u}에 대한 상세 내용입니다. 확인 후 필요한 조치를 취해주세요.`,recipient_type:"EMPLOYEE",recipient_id:`EMP-${String(Math.floor(Math.random()*100)+1).padStart(3,"0")}`,is_read:Math.random()>.6,created_at:A(Q(new Date,d),"yyyy-MM-dd'T'HH:mm:ss"),expires_at:A(Q(new Date,d-30),"yyyy-MM-dd'T'HH:mm:ss")})}return t.sort((a,h)=>new Date(h.created_at).getTime()-new Date(a.created_at).getTime())},Ze=({type:t})=>{switch(t){case"TRAINING_REMINDER":return e.jsx(X,{className:"h-5 w-5 text-blue-500"});case"EXPIRY_WARNING":return e.jsx(Pe,{className:"h-5 w-5 text-orange-500"});case"RETRAINING_REQUIRED":return e.jsx(De,{className:"h-5 w-5 text-red-500"});case"SESSION_CANCELLED":return e.jsx(Me,{className:"h-5 w-5 text-gray-500"});case"RESULT_AVAILABLE":return e.jsx(Ae,{className:"h-5 w-5 text-green-500"});case"CERTIFICATE_READY":return e.jsx(ke,{className:"h-5 w-5 text-purple-500"});case"SYSTEM":return e.jsx(D,{className:"h-5 w-5 text-gray-600"});default:return e.jsx(D,{className:"h-5 w-5"})}},Je=({priority:t})=>{const r={LOW:{label:"낮음",variant:"secondary"},MEDIUM:{label:"보통",variant:"default"},HIGH:{label:"높음",variant:"warning"},URGENT:{label:"긴급",variant:"destructive"}},{label:n,variant:l}=r[t];return e.jsx(M,{variant:l,children:n})};function hs(){be();const[t,r]=i.useState(Xe),[n,l]=i.useState(""),[a,h]=i.useState("all"),[c,d]=i.useState("all"),[x,u]=i.useState(!1),[m,p]=i.useState(new Set),[S,N]=i.useState(!1),[f,g]=i.useState({emailNotifications:!0,inAppNotifications:!0,trainingReminder:!0,expiryWarning:!0,retrainingRequired:!0,reminderDays:[7,3,1]}),y=i.useMemo(()=>t.filter(s=>{const o=s.title.toLowerCase().includes(n.toLowerCase())||s.message.toLowerCase().includes(n.toLowerCase()),j=a==="all"||s.type===a,O=c==="all"||s.priority===c,le=!x||!s.is_read;return o&&j&&O&&le}),[t,n,a,c,x]),C=i.useMemo(()=>({total:t.length,unread:t.filter(s=>!s.is_read).length,urgent:t.filter(s=>s.priority==="URGENT"&&!s.is_read).length,today:t.filter(s=>A(new Date(s.created_at),"yyyy-MM-dd")===A(new Date,"yyyy-MM-dd")).length}),[t]),L=s=>{r(o=>o.map(j=>j.notification_id===s?{...j,is_read:!0}:j))},T=()=>{r(s=>s.map(o=>({...o,is_read:!0})))},B=()=>{r(s=>s.map(o=>m.has(o.notification_id)?{...o,is_read:!0}:o)),p(new Set)},ne=s=>{r(o=>o.filter(j=>j.notification_id!==s))},ae=()=>{r(s=>s.filter(o=>!m.has(o.notification_id))),p(new Set)},ie=s=>{p(s?new Set(y.map(o=>o.notification_id)):new Set)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"알림 센터"}),e.jsx("p",{className:"text-muted-foreground",children:"교육 일정 및 시스템 알림 관리"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>N(!0),children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"알림 설정"]}),e.jsxs(w,{onClick:T,disabled:C.unread===0,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"모두 읽음 처리"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(b,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"전체 알림"})]})]})})}),e.jsx(b,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(_e,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.unread}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"읽지 않음"})]})]})})}),e.jsx(b,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Ie,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.urgent}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"긴급 알림"})]})]})})}),e.jsx(b,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(X,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.today}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"오늘 알림"})]})]})})})]}),e.jsx(b,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Te,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ue,{placeholder:"알림 검색...",className:"pl-8",value:n,onChange:s=>l(s.target.value)})]}),e.jsxs(W,{value:a,onValueChange:h,children:[e.jsx(F,{className:"w-full md:w-40",children:e.jsx($,{placeholder:"유형"})}),e.jsxs(V,{children:[e.jsx(v,{value:"all",children:"전체 유형"}),e.jsx(v,{value:"TRAINING_REMINDER",children:"교육 일정"}),e.jsx(v,{value:"EXPIRY_WARNING",children:"만료 임박"}),e.jsx(v,{value:"RETRAINING_REQUIRED",children:"재교육 필요"}),e.jsx(v,{value:"RESULT_AVAILABLE",children:"결과 확인"}),e.jsx(v,{value:"CERTIFICATE_READY",children:"이수증 발급"}),e.jsx(v,{value:"SYSTEM",children:"시스템"})]})]}),e.jsxs(W,{value:c,onValueChange:d,children:[e.jsx(F,{className:"w-full md:w-32",children:e.jsx($,{placeholder:"우선순위"})}),e.jsxs(V,{children:[e.jsx(v,{value:"all",children:"전체"}),e.jsx(v,{value:"URGENT",children:"긴급"}),e.jsx(v,{value:"HIGH",children:"높음"}),e.jsx(v,{value:"MEDIUM",children:"보통"}),e.jsx(v,{value:"LOW",children:"낮음"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{checked:x,onCheckedChange:u}),e.jsx(k,{children:"읽지 않은 알림만"})]})]})})}),m.size>0&&e.jsx(b,{children:e.jsx(R,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.size,"개 선택됨"]}),e.jsxs(w,{size:"sm",variant:"outline",onClick:B,children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"읽음 처리"]}),e.jsxs(w,{size:"sm",variant:"outline",onClick:ae,children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"삭제"]})]})})}),e.jsxs(b,{children:[e.jsxs(me,{children:[e.jsx(pe,{children:"알림 목록"}),e.jsxs(fe,{children:["총 ",y.length,"건의 알림"]})]}),e.jsx(R,{children:e.jsxs(je,{children:[e.jsx(Ne,{children:e.jsxs(H,{children:[e.jsx(_,{className:"w-12",children:e.jsx(Y,{checked:m.size===y.length&&y.length>0,onCheckedChange:ie})}),e.jsx(_,{children:"유형"}),e.jsx(_,{children:"제목"}),e.jsx(_,{children:"우선순위"}),e.jsx(_,{children:"일시"}),e.jsx(_,{children:"상태"}),e.jsx(_,{className:"text-right",children:"액션"})]})}),e.jsx(ge,{children:y.length===0?e.jsx(H,{children:e.jsxs(E,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[e.jsx(D,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"알림이 없습니다"]})}):y.slice(0,20).map(s=>e.jsxs(H,{className:s.is_read?"opacity-60":"",children:[e.jsx(E,{children:e.jsx(Y,{checked:m.has(s.notification_id),onCheckedChange:o=>{const j=new Set(m);o?j.add(s.notification_id):j.delete(s.notification_id),p(j)}})}),e.jsx(E,{children:e.jsx(Ze,{type:s.type})}),e.jsx(E,{children:e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${s.is_read?"":"font-bold"}`,children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.message})]})}),e.jsx(E,{children:e.jsx(Je,{priority:s.priority})}),e.jsx(E,{children:e.jsx("div",{className:"text-sm",children:A(new Date(s.created_at),"yyyy-MM-dd HH:mm")})}),e.jsx(E,{children:s.is_read?e.jsx(M,{variant:"secondary",children:"읽음"}):e.jsx(M,{variant:"default",children:"새 알림"})}),e.jsx(E,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[!s.is_read&&e.jsx(w,{size:"icon",variant:"ghost",onClick:()=>L(s.notification_id),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(w,{size:"icon",variant:"ghost",onClick:()=>ne(s.notification_id),children:e.jsx(z,{className:"h-4 w-4"})})]})})]},s.notification_id))})]})})]}),e.jsx(ve,{open:S,onOpenChange:N,children:e.jsxs(ye,{className:"max-w-md",children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"알림 설정"}),e.jsx(we,{children:"알림 수신 방법과 유형을 설정합니다"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"수신 방법"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"email",children:"이메일 알림"}),e.jsx(I,{id:"email",checked:f.emailNotifications,onCheckedChange:s=>g(o=>({...o,emailNotifications:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"inapp",children:"앱 내 알림"}),e.jsx(I,{id:"inapp",checked:f.inAppNotifications,onCheckedChange:s=>g(o=>({...o,inAppNotifications:s}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"알림 유형"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"training",children:"교육 일정 알림"}),e.jsx(I,{id:"training",checked:f.trainingReminder,onCheckedChange:s=>g(o=>({...o,trainingReminder:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"expiry",children:"만료 임박 알림"}),e.jsx(I,{id:"expiry",checked:f.expiryWarning,onCheckedChange:s=>g(o=>({...o,expiryWarning:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"retraining",children:"재교육 필요 알림"}),e.jsx(I,{id:"retraining",checked:f.retrainingRequired,onCheckedChange:s=>g(o=>({...o,retrainingRequired:s}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"리마인더 시기"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"교육 시작 전 알림을 받을 시기를 선택하세요"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1,3,7,14,30].map(s=>e.jsxs(M,{variant:f.reminderDays.includes(s)?"default":"outline",className:"cursor-pointer",onClick:()=>{g(o=>({...o,reminderDays:o.reminderDays.includes(s)?o.reminderDays.filter(j=>j!==s):[...o.reminderDays,s].sort((j,O)=>O-j)}))},children:[s,"일 전"]},s))})]})]}),e.jsxs(Ee,{children:[e.jsx(w,{variant:"outline",onClick:()=>N(!1),children:"취소"}),e.jsx(w,{onClick:()=>N(!1),children:"저장"})]})]})})]})}export{hs as default};
