import{j as e}from"./vendor-ui-3vVLwvSG.js";import{u as v,r as C}from"./vendor-react-3RSvEdhP.js";import{C as r,a as i,e as n,b as o,B as d,d as g}from"./index-DbE0N-7e.js";import{P as T}from"./LoadingSpinner-C546iy_4.js";import{T as k}from"./TraineeStatusBadge-27eUosfM.js";import{T as q}from"./TrainingStageTimeline-Db2yO2Pa.js";import"./dialog-D5PoXStQ.js";import"./label-Dcyga6z7.js";import"./textarea-DKXFBtN7.js";import"./select-B9RdTlAY.js";import{M as _}from"./MeetingScheduleCard-CfxCra1l.js";import"./LazyCharts-DetV40kx.js";import{j as u,q as p,m as P,g as f,T as N,P as D,n as I,av as j}from"./vendor-icons-B-g4Br4W.js";import{u as Q,a as B,b as S,c as M,d as A}from"./newTqcStore-CYv8xO33.js";import"./switch-DEYTfbKs.js";import"./table-C47-Z7GG.js";import"./vendor-i18n-BmxLmPQ7.js";import"./vendor-charts-B2i3rig-.js";import"./vendor-utils-CC1vNFCq.js";function E({stats:s,isLoading:a}){const m=v(),x=[{title:"교육중 인원",value:s?.inTraining??0,icon:u,color:"text-primary",bgColor:"bg-primary/10",link:"/new-tqc/trainees?status=IN_TRAINING"},{title:"전체 교육생",value:s?.totalTrainees??0,icon:p,color:"text-status-pass",bgColor:"bg-status-pass/10",link:"/new-tqc/trainees"},{title:"교육 완료",value:s?.completed??0,icon:p,color:"text-blue-500",bgColor:"bg-blue-500/10",link:"/new-tqc/trainees?status=COMPLETED"},{title:"퇴사",value:s?.resigned??0,icon:P,color:"text-destructive",bgColor:"bg-destructive/10",link:"/new-tqc/resignations"},{title:"예정된 미팅",value:s?.meetingsPending??0,icon:f,color:"text-orange-500",bgColor:"bg-orange-500/10",link:"/new-tqc/meetings"},{title:"색맹 검사 필요",value:s?.colorBlindPending??0,icon:N,color:"text-yellow-500",bgColor:"bg-yellow-500/10",link:"/new-tqc/trainees?color_blind=null"}];return a?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:Array.from({length:6}).map((l,c)=>e.jsxs(r,{className:"animate-pulse",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20"}),e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full"})]}),e.jsx(n,{children:e.jsx("div",{className:"h-8 bg-muted rounded w-16"})})]},c))}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:x.map((l,c)=>e.jsxs(r,{className:"cursor-pointer transition-all hover:shadow-lg hover:-translate-y-1 group",onClick:()=>m(l.link),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&m(l.link),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:l.title}),e.jsx("div",{className:`p-2 rounded-full ${l.bgColor} group-hover:scale-110 transition-transform`,children:e.jsx(l.icon,{className:`h-4 w-4 ${l.color}`})})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold",children:l.value})})]},c))})}function L({stats:s}){return s?e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"교육 현황 요약"]})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"평균 진행률"}),e.jsxs("span",{className:"font-bold",children:[s.averageProgress,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${s.averageProgress}%`}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"text-center p-3 bg-status-pass/10 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-status-pass",children:s.completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"완료"})]}),e.jsxs("div",{className:"text-center p-3 bg-destructive/10 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-destructive",children:s.resigned}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"퇴사"})]})]}),e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"퇴사율"}),e.jsxs("span",{className:"font-medium",children:[s.resignationRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"이번주 미팅"}),e.jsxs("span",{className:"font-medium",children:[s.meetingsThisWeek,"건"]})]})]})]})})]}):null}function ae(){const s=v(),a=Q(),m=B(),x=S(),l=M(),{fetchDashboardStats:c,fetchTrainees:h,fetchUpcomingMeetings:b}=A();if(C.useEffect(()=>{(async()=>await Promise.all([c(),h(),b(7)]))()},[]),l.dashboard&&!a)return e.jsx(T,{});const w=[...m].filter(t=>t.status==="IN_TRAINING").sort((t,y)=>new Date(y.created_at).getTime()-new Date(t.created_at).getTime()).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"신입 TQC 교육"}),e.jsx("p",{className:"text-muted-foreground",children:"신입 교육생 관리 및 교육 현황 대시보드"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{onClick:()=>s("/new-tqc/trainees/new"),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"교육생 등록"]}),e.jsxs(d,{variant:"outline",onClick:()=>s("/new-tqc/settings"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"설정"]})]})]}),e.jsx(E,{stats:a,isLoading:l.dashboard}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"최근 등록 교육생"]}),e.jsx(g,{children:"최근 등록된 신입 교육생"})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>s("/new-tqc/trainees"),children:["전체보기",e.jsx(j,{className:"h-4 w-4 ml-1"})]})]}),e.jsx(n,{children:w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",onClick:()=>s(`/new-tqc/trainees/${t.trainee_id}`),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:t.name}),e.jsx(k,{status:t.status})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[e.jsx("span",{children:t.team_id}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.trainer_id}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.start_week,"주차"]})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(q,{stages:[]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right mt-1",children:[t.progress_percentage,"%"]})]})]},t.trainee_id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(u,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"등록된 교육생이 없습니다."}),e.jsx(d,{variant:"link",size:"sm",onClick:()=>s("/new-tqc/trainees/new"),children:"교육생 등록하기"})]})})]}),e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"예정된 미팅"]}),e.jsx(g,{children:"7일 이내 예정된 미팅"})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>s("/new-tqc/meetings"),children:["전체보기",e.jsx(j,{className:"h-4 w-4 ml-1"})]})]}),e.jsx(n,{children:x.length>0?e.jsx("div",{className:"space-y-2",children:x.slice(0,5).map(t=>e.jsx(_,{meeting:t,onClick:()=>s(`/new-tqc/meetings?id=${t.meeting_id}`)},t.meeting_id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(f,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"예정된 미팅이 없습니다."})]})})]}),e.jsx(L,{stats:a}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-orange-500"}),"주의 필요 항목"]}),e.jsx(g,{children:"조치가 필요한 항목들"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-3",children:[a&&a.colorBlindPending>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg cursor-pointer hover:bg-yellow-500/20 transition-colors",onClick:()=>s("/new-tqc/trainees?color_blind=null"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-full",children:e.jsx(N,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Color Blind 검사 필요"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.colorBlindPending,"명의 교육생이 검사를 받지 않았습니다."]})]})]}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),(!a||a.colorBlindPending===0)&&e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{children:"현재 주의가 필요한 항목이 없습니다."})})]})})]})]})]})}export{ae as default};
