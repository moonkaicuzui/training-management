import{j as e}from"./vendor-ui-3vVLwvSG.js";import{l as D,u as E,r as S}from"./vendor-react-3RSvEdhP.js";import{g as _,B as H,f as j,C as o,a as x,b as m,e as h,d as M}from"./index-DbE0N-7e.js";import{T as L,a as P,b as y,c as d,d as I,e as c}from"./table-C47-Z7GG.js";import{T as k,a as R,b as u,c as f}from"./tabs-BiL_WdmF.js";import{P as F}from"./LoadingSpinner-C546iy_4.js";import{u as b}from"./vendor-i18n-BmxLmPQ7.js";import{O as V,Q as $,g as O,A as U,U as z}from"./vendor-icons-B-g4Br4W.js";import{f as v}from"./vendor-utils-CC1vNFCq.js";import"./vendor-charts-B2i3rig-.js";function se(){const{id:l}=D(),{t:a}=b(),t=E(),{selectedEmployee:r,employeeHistory:n,loading:A,fetchEmployee:w,fetchEmployeeHistory:T}=_();if(S.useEffect(()=>{l&&(w(l),T(l))},[l]),A.employees||!r)return e.jsx(F,{});const g=n.filter(s=>s.result==="PASS"),N=n.filter(s=>s.result==="FAIL"),C=n.filter(s=>s.score!==null).length>0?Math.round(n.filter(s=>s.score!==null).reduce((s,i)=>s+(i.score||0),0)/n.filter(s=>s.score!==null).length):0,B=n.reduce((s,i)=>(i.grade&&(s[i.grade]=(s[i.grade]||0)+1),s),{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/employees"),children:e.jsx(V,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r.employee_name}),e.jsxs("p",{className:"text-muted-foreground",children:[r.employee_id," · ",a(`position.${r.position}`)]})]}),e.jsx(j,{variant:r.status==="ACTIVE"?"success":"inactive",className:"ml-auto",children:r.status==="ACTIVE"?a("common.active"):a("common.inactive")})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:a("employee.department")}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-xl font-bold",children:r.department}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a(`building.${r.building}`)," · ",r.line]})]})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:a("employee.hireDate")}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-xl font-bold",children:v(new Date(r.hire_date),"yyyy-MM-dd")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.floor((Date.now()-new Date(r.hire_date).getTime())/(1e3*60*60*24*365)),"년 근무"]})]})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"교육 이수"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"text-xl font-bold",children:[g.length,e.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:["/ ",n.length]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["합격률"," ",n.length>0?Math.round(g.length/n.length*100):0,"%"]})]})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"평균 점수"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"text-xl font-bold",children:[C,"점"]}),e.jsx("div",{className:"flex gap-1 mt-1",children:Object.entries(B).map(([s,i])=>e.jsxs(j,{variant:s==="AA"?"gradeAA":s==="A"?"gradeA":s==="B"?"gradeB":"gradeC",className:"text-xs",children:[s,": ",i]},s))})]})]})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(m,{children:a("employee.trainingHistory")}),e.jsx(M,{children:"모든 교육 이력이 표시됩니다. 이 데이터는 삭제할 수 없습니다."})]}),e.jsx(h,{children:e.jsxs(k,{defaultValue:"all",children:[e.jsxs(R,{children:[e.jsxs(u,{value:"all",children:["전체 (",n.length,")"]}),e.jsxs(u,{value:"pass",children:["합격 (",g.length,")"]}),e.jsxs(u,{value:"fail",children:["불합격 (",N.length,")"]})]}),e.jsx(f,{value:"all",className:"mt-4",children:e.jsx(p,{results:n})}),e.jsx(f,{value:"pass",className:"mt-4",children:e.jsx(p,{results:g})}),e.jsx(f,{value:"fail",className:"mt-4",children:e.jsx(p,{results:N})})]})})]})]})}function p({results:l}){const{t:a}=b();return l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a("common.noData")}):e.jsxs(L,{children:[e.jsx(P,{children:e.jsxs(y,{children:[e.jsx(d,{children:a("training.date")}),e.jsx(d,{children:"프로그램"}),e.jsx(d,{className:"text-center",children:a("training.score")}),e.jsx(d,{className:"text-center",children:a("training.grade")}),e.jsx(d,{className:"text-center",children:a("training.result")}),e.jsx(d,{children:a("training.trainer")}),e.jsx(d,{children:a("training.remarks")})]})}),e.jsx(I,{children:l.map(t=>e.jsxs(y,{children:[e.jsx(c,{children:v(new Date(t.training_date),"yyyy-MM-dd")}),e.jsx(c,{children:e.jsx(j,{variant:"outline",children:t.program_code})}),e.jsx(c,{className:"text-center font-medium",children:t.score!==null?`${t.score}점`:"-"}),e.jsx(c,{className:"text-center",children:t.grade&&e.jsx(j,{variant:t.grade==="AA"?"gradeAA":t.grade==="A"?"gradeA":t.grade==="B"?"gradeB":"gradeC",children:t.grade})}),e.jsx(c,{className:"text-center",children:e.jsx(j,{variant:t.result==="PASS"?"success":t.result==="FAIL"?"destructive":"secondary",children:t.result==="PASS"?a("training.pass"):t.result==="FAIL"?a("training.fail"):a("training.absent")})}),e.jsx(c,{children:t.evaluated_by}),e.jsx(c,{className:"max-w-[200px] truncate",children:t.remarks||"-"})]},t.result_id))})]})}export{se as default};
