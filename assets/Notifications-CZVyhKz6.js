import{j as e}from"./vendor-ui-3vVLwvSG.js";import{r as c}from"./vendor-react-3RSvEdhP.js";import{B as o,C as m,e as j,I as K,a as Z,b as ee,d as se,f as D}from"./index-DbE0N-7e.js";import{S as v}from"./switch-DEYTfbKs.js";import{L as C}from"./label-Dcyga6z7.js";import{T as ae,a as te,b as k,c as N,d as ie,e as x}from"./table-C47-Z7GG.js";import{S as G,a as U,b as H,c as O,d as l}from"./select-B9RdTlAY.js";import{D as le,a as re,b as ne,c as ce,d as de,e as oe}from"./dialog-D5PoXStQ.js";import{C as B}from"./checkbox-Dpm-Lu5v.js";import{u as xe}from"./vendor-i18n-BmxLmPQ7.js";import{n as he,aa as L,B as M,a4 as me,ab as je,g as F,S as Ne,z as P,A as ue,$ as pe,W as ge,T as fe,w as ye}from"./vendor-icons-B-g4Br4W.js";import{f as I,q as Y}from"./vendor-utils-CC1vNFCq.js";import"./vendor-charts-B2i3rig-.js";const Ee=()=>{const i=[],r=["TRAINING_REMINDER","EXPIRY_WARNING","RETRAINING_REQUIRED","SESSION_CANCELLED","RESULT_AVAILABLE","CERTIFICATE_READY","SYSTEM"],d=["LOW","MEDIUM","HIGH","URGENT"],R={TRAINING_REMINDER:["QIP 기초 교육 예정","생산 품질 관리 교육 임박","안전 교육 D-3"],EXPIRY_WARNING:["QIP 자격 만료 임박 (7일)","생산 품질 자격 만료 (14일)","안전 교육 갱신 필요"],RETRAINING_REQUIRED:["재교육 필요: 불합격","역량 평가 미달","정기 재교육 대상자"],SESSION_CANCELLED:["3월 15일 교육 취소","일정 변경 안내","장소 변경 안내"],RESULT_AVAILABLE:["교육 결과 확인 가능","시험 결과 발표","평가 완료"],CERTIFICATE_READY:["이수증 발급 완료","자격증 갱신 완료","수료증 다운로드 가능"],SYSTEM:["시스템 점검 안내","새 기능 업데이트","보안 알림"]};for(let n=0;n<30;n++){const u=r[Math.floor(Math.random()*r.length)],p=d[Math.floor(Math.random()*d.length)],_=Math.floor(Math.random()*14),g=R[u],T=g[Math.floor(Math.random()*g.length)];i.push({notification_id:`NOTIF-${String(n+1).padStart(4,"0")}`,type:u,priority:p,title:T,message:`${T}에 대한 상세 내용입니다. 확인 후 필요한 조치를 취해주세요.`,recipient_type:"EMPLOYEE",recipient_id:`EMP-${String(Math.floor(Math.random()*100)+1).padStart(3,"0")}`,is_read:Math.random()>.6,created_at:I(Y(new Date,_),"yyyy-MM-dd'T'HH:mm:ss"),expires_at:I(Y(new Date,_-30),"yyyy-MM-dd'T'HH:mm:ss")})}return i.sort((n,u)=>new Date(u.created_at).getTime()-new Date(n.created_at).getTime())},ve=({type:i})=>{switch(i){case"TRAINING_REMINDER":return e.jsx(F,{className:"h-5 w-5 text-blue-500"});case"EXPIRY_WARNING":return e.jsx(ye,{className:"h-5 w-5 text-orange-500"});case"RETRAINING_REQUIRED":return e.jsx(fe,{className:"h-5 w-5 text-red-500"});case"SESSION_CANCELLED":return e.jsx(ge,{className:"h-5 w-5 text-gray-500"});case"RESULT_AVAILABLE":return e.jsx(pe,{className:"h-5 w-5 text-green-500"});case"CERTIFICATE_READY":return e.jsx(ue,{className:"h-5 w-5 text-purple-500"});case"SYSTEM":return e.jsx(M,{className:"h-5 w-5 text-gray-600"});default:return e.jsx(M,{className:"h-5 w-5"})}},Ce=({priority:i})=>{const r={LOW:{label:"낮음",variant:"secondary"},MEDIUM:{label:"보통",variant:"default"},HIGH:{label:"높음",variant:"warning"},URGENT:{label:"긴급",variant:"destructive"}},{label:d,variant:R}=r[i];return e.jsx(D,{variant:R,children:d})};function Ue(){xe();const[i,r]=c.useState(Ee),[d,R]=c.useState(""),[n,u]=c.useState("all"),[p,_]=c.useState("all"),[g,T]=c.useState(!1),[h,w]=c.useState(new Set),[W,A]=c.useState(!1),[f,y]=c.useState({emailNotifications:!0,inAppNotifications:!0,trainingReminder:!0,expiryWarning:!0,retrainingRequired:!0,reminderDays:[7,3,1]}),E=c.useMemo(()=>i.filter(s=>{const a=s.title.toLowerCase().includes(d.toLowerCase())||s.message.toLowerCase().includes(d.toLowerCase()),t=n==="all"||s.type===n,b=p==="all"||s.priority===p,J=!g||!s.is_read;return a&&t&&b&&J}),[i,d,n,p,g]),S=c.useMemo(()=>({total:i.length,unread:i.filter(s=>!s.is_read).length,urgent:i.filter(s=>s.priority==="URGENT"&&!s.is_read).length,today:i.filter(s=>I(new Date(s.created_at),"yyyy-MM-dd")===I(new Date,"yyyy-MM-dd")).length}),[i]),z=s=>{r(a=>a.map(t=>t.notification_id===s?{...t,is_read:!0}:t))},Q=()=>{r(s=>s.map(a=>({...a,is_read:!0})))},V=()=>{r(s=>s.map(a=>h.has(a.notification_id)?{...a,is_read:!0}:a)),w(new Set)},X=s=>{r(a=>a.filter(t=>t.notification_id!==s))},$=()=>{r(s=>s.filter(a=>!h.has(a.notification_id))),w(new Set)},q=s=>{w(s?new Set(E.map(a=>a.notification_id)):new Set)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"알림 센터"}),e.jsx("p",{className:"text-muted-foreground",children:"교육 일정 및 시스템 알림 관리"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>A(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"알림 설정"]}),e.jsxs(o,{onClick:Q,disabled:S.unread===0,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"모두 읽음 처리"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(m,{children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(M,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:S.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"전체 알림"})]})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(me,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:S.unread}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"읽지 않음"})]})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(je,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:S.urgent}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"긴급 알림"})]})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(F,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:S.today}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"오늘 알림"})]})]})})})]}),e.jsx(m,{children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(K,{placeholder:"알림 검색...",className:"pl-8",value:d,onChange:s=>R(s.target.value)})]}),e.jsxs(G,{value:n,onValueChange:u,children:[e.jsx(U,{className:"w-full md:w-40",children:e.jsx(H,{placeholder:"유형"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"전체 유형"}),e.jsx(l,{value:"TRAINING_REMINDER",children:"교육 일정"}),e.jsx(l,{value:"EXPIRY_WARNING",children:"만료 임박"}),e.jsx(l,{value:"RETRAINING_REQUIRED",children:"재교육 필요"}),e.jsx(l,{value:"RESULT_AVAILABLE",children:"결과 확인"}),e.jsx(l,{value:"CERTIFICATE_READY",children:"이수증 발급"}),e.jsx(l,{value:"SYSTEM",children:"시스템"})]})]}),e.jsxs(G,{value:p,onValueChange:_,children:[e.jsx(U,{className:"w-full md:w-32",children:e.jsx(H,{placeholder:"우선순위"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"전체"}),e.jsx(l,{value:"URGENT",children:"긴급"}),e.jsx(l,{value:"HIGH",children:"높음"}),e.jsx(l,{value:"MEDIUM",children:"보통"}),e.jsx(l,{value:"LOW",children:"낮음"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{checked:g,onCheckedChange:T}),e.jsx(C,{children:"읽지 않은 알림만"})]})]})})}),h.size>0&&e.jsx(m,{children:e.jsx(j,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h.size,"개 선택됨"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:V,children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"읽음 처리"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:$,children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),"삭제"]})]})})}),e.jsxs(m,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"알림 목록"}),e.jsxs(se,{children:["총 ",E.length,"건의 알림"]})]}),e.jsx(j,{children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(k,{children:[e.jsx(N,{className:"w-12",children:e.jsx(B,{checked:h.size===E.length&&E.length>0,onCheckedChange:q})}),e.jsx(N,{children:"유형"}),e.jsx(N,{children:"제목"}),e.jsx(N,{children:"우선순위"}),e.jsx(N,{children:"일시"}),e.jsx(N,{children:"상태"}),e.jsx(N,{className:"text-right",children:"액션"})]})}),e.jsx(ie,{children:E.length===0?e.jsx(k,{children:e.jsxs(x,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[e.jsx(M,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"알림이 없습니다"]})}):E.slice(0,20).map(s=>e.jsxs(k,{className:s.is_read?"opacity-60":"",children:[e.jsx(x,{children:e.jsx(B,{checked:h.has(s.notification_id),onCheckedChange:a=>{const t=new Set(h);a?t.add(s.notification_id):t.delete(s.notification_id),w(t)}})}),e.jsx(x,{children:e.jsx(ve,{type:s.type})}),e.jsx(x,{children:e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${s.is_read?"":"font-bold"}`,children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.message})]})}),e.jsx(x,{children:e.jsx(Ce,{priority:s.priority})}),e.jsx(x,{children:e.jsx("div",{className:"text-sm",children:I(new Date(s.created_at),"yyyy-MM-dd HH:mm")})}),e.jsx(x,{children:s.is_read?e.jsx(D,{variant:"secondary",children:"읽음"}):e.jsx(D,{variant:"default",children:"새 알림"})}),e.jsx(x,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[!s.is_read&&e.jsx(o,{size:"icon",variant:"ghost",onClick:()=>z(s.notification_id),children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(o,{size:"icon",variant:"ghost",onClick:()=>X(s.notification_id),children:e.jsx(P,{className:"h-4 w-4"})})]})})]},s.notification_id))})]})})]}),e.jsx(le,{open:W,onOpenChange:A,children:e.jsxs(re,{className:"max-w-md",children:[e.jsxs(ne,{children:[e.jsx(ce,{children:"알림 설정"}),e.jsx(de,{children:"알림 수신 방법과 유형을 설정합니다"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"수신 방법"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{htmlFor:"email",children:"이메일 알림"}),e.jsx(v,{id:"email",checked:f.emailNotifications,onCheckedChange:s=>y(a=>({...a,emailNotifications:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{htmlFor:"inapp",children:"앱 내 알림"}),e.jsx(v,{id:"inapp",checked:f.inAppNotifications,onCheckedChange:s=>y(a=>({...a,inAppNotifications:s}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"알림 유형"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{htmlFor:"training",children:"교육 일정 알림"}),e.jsx(v,{id:"training",checked:f.trainingReminder,onCheckedChange:s=>y(a=>({...a,trainingReminder:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{htmlFor:"expiry",children:"만료 임박 알림"}),e.jsx(v,{id:"expiry",checked:f.expiryWarning,onCheckedChange:s=>y(a=>({...a,expiryWarning:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{htmlFor:"retraining",children:"재교육 필요 알림"}),e.jsx(v,{id:"retraining",checked:f.retrainingRequired,onCheckedChange:s=>y(a=>({...a,retrainingRequired:s}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"리마인더 시기"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"교육 시작 전 알림을 받을 시기를 선택하세요"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1,3,7,14,30].map(s=>e.jsxs(D,{variant:f.reminderDays.includes(s)?"default":"outline",className:"cursor-pointer",onClick:()=>{y(a=>({...a,reminderDays:a.reminderDays.includes(s)?a.reminderDays.filter(t=>t!==s):[...a.reminderDays,s].sort((t,b)=>b-t)}))},children:[s,"일 전"]},s))})]})]}),e.jsxs(oe,{children:[e.jsx(o,{variant:"outline",onClick:()=>A(!1),children:"취소"}),e.jsx(o,{onClick:()=>A(!1),children:"저장"})]})]})})]})}export{Ue as default};
