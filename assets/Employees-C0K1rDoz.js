import{j as e}from"./vendor-ui-3vVLwvSG.js";import{k as F,r as u,u as I}from"./vendor-react-3RSvEdhP.js";import{B as T,C as w,e as P,I as R,o as $,p as B,n as D,a as L,b as U,d as _,f as V}from"./index-DbE0N-7e.js";import{T as M,a as O,b as E,c as o,d as H,e as t}from"./table-C47-Z7GG.js";import{S as v,a as C,b as A,c as N,d}from"./select-B9RdTlAY.js";import{b as z,u as q}from"./normalizedStore-BGqUWCoD.js";import{P as J}from"./LoadingSpinner-C546iy_4.js";import{u as K}from"./vendor-i18n-BmxLmPQ7.js";import{P as Q,S as G,E as W}from"./vendor-icons-B-g4Br4W.js";import{f as X}from"./vendor-utils-CC1vNFCq.js";import"./vendor-charts-B2i3rig-.js";function Y(a){const[y,n]=F(),{defaults:x,emptyValues:m=["","all",void 0]}=a,S=JSON.stringify(x),c=u.useMemo(()=>{const s={...x};return Object.keys(x).forEach(r=>{const i=x[r];if(Array.isArray(i)){const l=y.get(r);l&&(s[r]=l.split(",").filter(Boolean))}else{const l=y.get(r);l!==null&&(s[r]=l)}}),s},[y,S]),b=u.useCallback((s,r)=>{n(i=>{const l=new URLSearchParams(i);return r==null||m.includes(r)||Array.isArray(r)&&r.length===0?l.delete(s):Array.isArray(r)?l.set(s,r.join(",")):l.set(s,r),l},{replace:!0})},[n,m]),j=u.useCallback(s=>{n(r=>{const i=new URLSearchParams(r);return Object.entries(s).forEach(([l,h])=>{h==null||m.includes(h)||Array.isArray(h)&&h.length===0?i.delete(l):Array.isArray(h)?i.set(l,h.join(",")):i.set(l,h)}),i},{replace:!0})},[n,m]),p=u.useCallback(()=>{n({},{replace:!0})},[n]),f=u.useCallback(s=>{n(r=>{const i=new URLSearchParams(r);return i.delete(s),i},{replace:!0})},[n]),g=u.useMemo(()=>{const s=new URLSearchParams;Object.entries(c).forEach(([i,l])=>{l!=null&&!m.includes(l)&&!(Array.isArray(l)&&l.length===0)&&(Array.isArray(l)?s.set(i,l.join(",")):s.set(i,l))});const r=s.toString();return r?`?${r}`:""},[c,m]);return{filters:c,setFilter:b,setFilters:j,resetFilters:p,resetFilter:f,queryString:g}}function oe(){const{t:a}=K(),y=I(),{employees:n,loading:x}=z(),m=q(s=>s.fetchEmployees),{filters:S,setFilter:c}=Y({defaults:{search:"",department:"all",position:"all",building:"all",status:"ACTIVE"}}),{search:b,department:j,position:p,building:f,status:g}=S;return u.useEffect(()=>{m({search:b||void 0,department:j!=="all"?j:void 0,position:p!=="all"?p:void 0,building:f!=="all"?f:void 0,status:g!=="all"?g:void 0})},[b,j,p,f,g]),x?e.jsx(J,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("employee.title")}),e.jsx("p",{className:"text-muted-foreground",children:a("employee.description")})]}),e.jsxs(T,{children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),a("employee.addEmployee")]})]}),e.jsx(w,{children:e.jsx(P,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative lg:col-span-1",children:[e.jsx(G,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:a("employee.searchPlaceholder"),className:"pl-8",value:b,onChange:s=>c("search",s.target.value)})]}),e.jsxs(v,{value:j,onValueChange:s=>c("department",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.department")})}),e.jsxs(N,{children:[e.jsx(d,{value:"all",children:a("common.all")}),$.map(s=>e.jsx(d,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(v,{value:p,onValueChange:s=>c("position",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.position")})}),e.jsxs(N,{children:[e.jsx(d,{value:"all",children:a("common.all")}),B.map(s=>e.jsx(d,{value:s.value,children:a(`position.${s.value}`)},s.value))]})]}),e.jsxs(v,{value:f,onValueChange:s=>c("building",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("employee.building")})}),e.jsxs(N,{children:[e.jsx(d,{value:"all",children:a("common.all")}),D.map(s=>e.jsx(d,{value:s.value,children:a(`building.${s.value}`)},s.value))]})]}),e.jsxs(v,{value:g,onValueChange:s=>c("status",s),children:[e.jsx(C,{children:e.jsx(A,{placeholder:a("common.status")})}),e.jsxs(N,{children:[e.jsx(d,{value:"all",children:a("common.all")}),e.jsx(d,{value:"ACTIVE",children:a("common.active")}),e.jsx(d,{value:"INACTIVE",children:a("common.inactive")})]})]})]})})}),e.jsxs(w,{children:[e.jsxs(L,{children:[e.jsx(U,{children:a("employee.list")}),e.jsx(_,{children:a("employee.count",{count:n.length})})]}),e.jsx(P,{children:e.jsxs(M,{children:[e.jsx(O,{children:e.jsxs(E,{children:[e.jsx(o,{children:a("employee.id")}),e.jsx(o,{children:a("employee.name")}),e.jsx(o,{children:a("employee.department")}),e.jsx(o,{children:a("employee.position")}),e.jsx(o,{children:a("employee.building")}),e.jsx(o,{children:a("employee.line")}),e.jsx(o,{children:a("employee.hireDate")}),e.jsx(o,{children:a("common.status")}),e.jsx(o,{className:"w-[80px]",children:a("common.actions")})]})}),e.jsx(H,{children:n.length===0?e.jsx(E,{children:e.jsx(t,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:a("common.noData")})}):n.map(s=>e.jsxs(E,{children:[e.jsx(t,{className:"font-mono font-medium",children:s.employee_id}),e.jsx(t,{className:"font-medium",children:s.employee_name}),e.jsx(t,{children:e.jsx(V,{variant:"outline",children:s.department})}),e.jsx(t,{children:a(`position.${s.position}`)}),e.jsx(t,{children:a(`building.${s.building}`)}),e.jsx(t,{children:s.line}),e.jsx(t,{children:X(new Date(s.hire_date),"yyyy-MM-dd")}),e.jsx(t,{children:e.jsx(V,{variant:s.status==="ACTIVE"?"success":"inactive",children:s.status==="ACTIVE"?a("common.active"):a("common.inactive")})}),e.jsx(t,{children:e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>y(`/employees/${s.employee_id}`),children:e.jsx(W,{className:"h-4 w-4"})})})]},s.employee_id))})]})})]})]})}export{oe as default};
