import{j as e}from"./vendor-ui-3vVLwvSG.js";import{r as m}from"./vendor-react-3RSvEdhP.js";import{C as c,e as d,I as w,a as S,b as A,d as E,f as g,B as N}from"./index-CgMhWZQG.js";import{T as D,a as I,b as f,c as n,d as T,e as l}from"./table-C-QtM0IN.js";import{S as M,a as Q,b as R,c as z,d as _}from"./select-BFo01T9H.js";import{D as B,a as L,b as H,c as k}from"./dialog-Xn2gZ5Td.js";import{u as F}from"./vendor-i18n-BvwHJnYO.js";import{W as O,A as b,U as W,g as V,S as $,Y as q,Z as Y,D as K}from"./vendor-icons-O1RA8j5J.js";import{f as y}from"./vendor-utils-DC3_vehr.js";import"./vendor-charts-BNo0ya6L.js";const U=[{result_id:"RES-001",employee_id:"EMP-001",employee_name:"홍길동",department:"QIP",position:"TQC",program_code:"QIP-001",program_name:"QIP 기초 교육",training_date:"2024-12-15",score:95,grade:"AA",result:"PASS"},{result_id:"RES-002",employee_id:"EMP-002",employee_name:"김철수",department:"QIP",position:"RQC",program_code:"QIP-001",program_name:"QIP 기초 교육",training_date:"2024-12-15",score:88,grade:"A",result:"PASS"},{result_id:"RES-003",employee_id:"EMP-003",employee_name:"이영희",department:"Production",position:"Line Leader",program_code:"PRO-001",program_name:"생산 품질 관리",training_date:"2024-12-10",score:92,grade:"AA",result:"PASS"},{result_id:"RES-004",employee_id:"EMP-004",employee_name:"박지성",department:"Production",position:"Operator",program_code:"PRO-001",program_name:"생산 품질 관리",training_date:"2024-12-10",score:78,grade:"B",result:"PASS"},{result_id:"RES-005",employee_id:"EMP-005",employee_name:"손흥민",department:"Production",position:"Line Leader",program_code:"QIP-002",program_name:"QIP 심화 교육",training_date:"2024-12-20",score:85,grade:"A",result:"PASS"}],v=[{program_code:"QIP-001",program_name:"QIP 기초 교육"},{program_code:"QIP-002",program_name:"QIP 심화 교육"},{program_code:"PRO-001",program_name:"생산 품질 관리"}];function G({data:t,onClose:j}){const i=m.useRef(null),p=()=>{const x=i.current;if(!x)return;const r=window.open("","_blank");r&&(r.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>교육 이수증 - ${t.certificateNumber}</title>
          <style>
            @page { size: A4 landscape; margin: 0; }
            body {
              margin: 0;
              padding: 40px;
              font-family: 'Malgun Gothic', sans-serif;
              background: white;
            }
            .certificate {
              border: 8px double #1E40AF;
              padding: 40px;
              text-align: center;
              min-height: 500px;
              position: relative;
            }
            .logo { font-size: 24px; font-weight: bold; color: #1E40AF; margin-bottom: 10px; }
            .title { font-size: 36px; font-weight: bold; margin: 20px 0; color: #1E3A8A; }
            .subtitle { font-size: 18px; color: #64748B; margin-bottom: 30px; }
            .content { font-size: 16px; line-height: 2; margin: 30px 0; }
            .name { font-size: 28px; font-weight: bold; color: #0F172A; margin: 20px 0; }
            .details { display: flex; justify-content: center; gap: 40px; margin: 30px 0; }
            .detail-item { text-align: center; }
            .detail-label { font-size: 12px; color: #64748B; }
            .detail-value { font-size: 16px; font-weight: bold; }
            .footer { position: absolute; bottom: 40px; left: 0; right: 0; }
            .signature { margin-top: 40px; }
            .cert-number { font-size: 12px; color: #94A3B8; position: absolute; bottom: 20px; right: 40px; }
          </style>
        </head>
        <body>
          ${x.innerHTML}
        </body>
      </html>
    `),r.document.close(),r.focus(),setTimeout(()=>{r.print(),r.close()},250))};return e.jsx(B,{open:!0,onOpenChange:j,children:e.jsxs(L,{className:"max-w-4xl",children:[e.jsx(H,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"교육 이수증 미리보기"]})}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(N,{onClick:p,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"인쇄"]}),e.jsxs(N,{variant:"outline",onClick:p,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"PDF 저장"]})]}),e.jsx("div",{ref:i,className:"border-8 border-double border-primary p-8 bg-white text-center",style:{minHeight:"400px"},children:e.jsxs("div",{className:"certificate",children:[e.jsx("p",{className:"text-2xl font-bold text-primary mb-2",children:"Q-TRAIN"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"HWK Vietnam 품질 교육 관리 시스템"}),e.jsx("h1",{className:"text-4xl font-bold my-8 text-primary",children:"교 육 이 수 증"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Certificate of Completion"}),e.jsxs("div",{className:"my-8",children:[e.jsx("p",{className:"text-lg mb-4",children:"아래 직원은 다음의 교육 과정을 성공적으로 이수하였음을 증명합니다."}),e.jsx("p",{className:"text-3xl font-bold my-6",children:t.employeeName}),e.jsxs("p",{className:"text-muted-foreground",children:[t.department," / ",t.position]})]}),e.jsxs("div",{className:"flex justify-center gap-12 my-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"교육 프로그램"}),e.jsx("p",{className:"text-lg font-bold",children:t.programName}),e.jsx(g,{variant:"outline",className:"mt-1",children:t.programCode})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"교육 일자"}),e.jsx("p",{className:"text-lg font-bold",children:t.trainingDate})]}),t.score!==null&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"취득 점수"}),e.jsxs("p",{className:"text-lg font-bold",children:[t.score,"점"]}),t.grade&&e.jsx(g,{className:"mt-1",children:t.grade})]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t",children:[e.jsxs("p",{className:"text-lg",children:["발급일: ",t.issueDate]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"HWK Vietnam QIP Team"}),e.jsx("p",{className:"mt-2 font-bold",children:"교육팀장"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-8",children:["이수증 번호: ",t.certificateNumber]})]})})]})})}function ie(){F();const[t,j]=m.useState(""),[i,p]=m.useState("all"),[x,r]=m.useState(null),o=m.useMemo(()=>U.filter(s=>s.result==="PASS").filter(s=>{const a=s.employee_name.toLowerCase().includes(t.toLowerCase())||s.employee_id.toLowerCase().includes(t.toLowerCase()),u=i==="all"||s.program_code===i;return a&&u}).sort((s,a)=>a.training_date.localeCompare(s.training_date)),[t,i]),P=s=>{const a=new Date().getFullYear(),u=Math.floor(Math.random()*1e5);return{certificateNumber:`CERT-${a}-${String(u).padStart(6,"0")}`,employeeId:s.employee_id,employeeName:s.employee_name,department:s.department,position:s.position,programCode:s.program_code,programName:s.program_name,trainingDate:s.training_date,score:s.score,grade:s.grade,issueDate:y(new Date,"yyyy년 MM월 dd일")}},C=s=>{const a=P(s);r(a)},h=m.useMemo(()=>{const s=y(new Date,"yyyy-MM");return{totalEligible:o.length,totalPrograms:v.length,uniqueEmployees:new Set(o.map(a=>a.employee_id)).size,thisMonthCount:o.filter(a=>a.training_date.startsWith(s)).length}},[o]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"교육 이수증"}),e.jsx("p",{className:"text-muted-foreground",children:"교육 이수증 발급 및 관리"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(c,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.totalEligible}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"발급 가능 건수"})]})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(b,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.totalPrograms}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"교육 프로그램"})]})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(W,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.uniqueEmployees}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"이수 직원 수"})]})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(V,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.thisMonthCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"이번 달 이수"})]})]})})})]}),e.jsx(c,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"이름 또는 사번으로 검색...",className:"pl-8",value:t,onChange:s=>j(s.target.value)})]}),e.jsxs(M,{value:i,onValueChange:p,children:[e.jsx(Q,{className:"w-full md:w-64",children:e.jsx(R,{placeholder:"프로그램 선택"})}),e.jsxs(z,{children:[e.jsx(_,{value:"all",children:"전체 프로그램"}),v.map(s=>e.jsx(_,{value:s.program_code,children:s.program_name},s.program_code))]})]})]})})}),e.jsxs(c,{children:[e.jsxs(S,{children:[e.jsx(A,{children:"이수 완료 목록"}),e.jsx(E,{children:"교육을 이수한 직원의 이수증을 발급할 수 있습니다"})]}),e.jsx(d,{children:e.jsxs(D,{children:[e.jsx(I,{children:e.jsxs(f,{children:[e.jsx(n,{children:"사번"}),e.jsx(n,{children:"이름"}),e.jsx(n,{children:"부서"}),e.jsx(n,{children:"프로그램"}),e.jsx(n,{children:"교육일"}),e.jsx(n,{children:"점수"}),e.jsx(n,{children:"등급"}),e.jsx(n,{className:"text-right",children:"액션"})]})}),e.jsx(T,{children:o.length===0?e.jsx(f,{children:e.jsxs(l,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:[e.jsx(q,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"발급 가능한 이수증이 없습니다"]})}):o.map(s=>e.jsxs(f,{children:[e.jsx(l,{className:"font-mono",children:s.employee_id}),e.jsx(l,{className:"font-medium",children:s.employee_name}),e.jsx(l,{children:e.jsx(g,{variant:"outline",children:s.department})}),e.jsx(l,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.program_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.program_code})]})}),e.jsx(l,{children:s.training_date}),e.jsx(l,{children:s.score??"-"}),e.jsx(l,{children:s.grade&&e.jsx(g,{variant:s.grade==="AA"?"default":s.grade==="A"?"success":s.grade==="B"?"warning":"secondary",children:s.grade})}),e.jsx(l,{className:"text-right",children:e.jsxs(N,{size:"sm",onClick:()=>C(s),children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"이수증 발급"]})})]},s.result_id))})]})})]}),x&&e.jsx(G,{data:x,onClose:()=>r(null)})]})}export{ie as default};
